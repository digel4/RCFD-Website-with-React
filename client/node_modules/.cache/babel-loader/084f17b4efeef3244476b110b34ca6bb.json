{"ast":null,"code":"/*\r\n * wysiwyg web editor\r\n *\r\n * suneditor.js\r\n * Copyright 2017 JiHong Lee.\r\n * MIT license.\r\n */\n'use strict';\n\nimport _icons from '../assets/defaultIcons';\nimport _defaultLang from '../lang/en';\nimport util from './util';\nexport default {\n  /**\r\n   * @description document create\r\n   * @param {Element} element Textarea\r\n   * @param {Object} options Options\r\n   * @returns {Object}\r\n   */\n  init: function (element, options) {\n    if (typeof options !== 'object') options = {};\n    const doc = document;\n    /** --- init options --- */\n\n    this._initOptions(element, options); // suneditor div\n\n\n    const top_div = doc.createElement('DIV');\n    top_div.className = 'sun-editor' + (options.rtl ? ' se-rtl' : '');\n    if (element.id) top_div.id = 'suneditor_' + element.id; // relative div\n\n    const relative = doc.createElement('DIV');\n    relative.className = 'se-container'; // toolbar\n\n    const tool_bar = this._createToolBar(doc, options.buttonList, options.plugins, options);\n\n    tool_bar.element.style.visibility = 'hidden';\n    if (tool_bar.pluginCallButtons.math) this._checkKatexMath(options.katex);\n    const arrow = doc.createElement('DIV');\n    arrow.className = 'se-arrow'; // sticky toolbar dummy\n\n    const sticky_dummy = doc.createElement('DIV');\n    sticky_dummy.className = 'se-toolbar-sticky-dummy'; // inner editor div\n\n    const editor_div = doc.createElement('DIV');\n    editor_div.className = 'se-wrapper';\n    /** --- init elements and create bottom bar --- */\n\n    const initElements = this._initElements(options, top_div, tool_bar.element, arrow);\n\n    const bottomBar = initElements.bottomBar;\n    const wysiwyg_div = initElements.wysiwygFrame;\n    const placeholder_span = initElements.placeholder;\n    let textarea = initElements.codeView; // resizing bar\n\n    const resizing_bar = bottomBar.resizingBar;\n    const navigation = bottomBar.navigation;\n    const char_wrapper = bottomBar.charWrapper;\n    const char_counter = bottomBar.charCounter; // loading box\n\n    const loading_box = doc.createElement('DIV');\n    loading_box.className = 'se-loading-box sun-editor-common';\n    loading_box.innerHTML = '<div class=\"se-loading-effect\"></div>'; // enter line\n\n    const line_breaker = doc.createElement('DIV');\n    line_breaker.className = 'se-line-breaker';\n    line_breaker.innerHTML = '<button class=\"se-btn\">' + options.icons.line_break + '</button>';\n    const line_breaker_t = doc.createElement('DIV');\n    line_breaker_t.className += 'se-line-breaker-component';\n    const line_breaker_b = line_breaker_t.cloneNode(true);\n    line_breaker_t.innerHTML = line_breaker_b.innerHTML = options.icons.line_break; // resize operation background\n\n    const resize_back = doc.createElement('DIV');\n    resize_back.className = 'se-resizing-back'; // toolbar container\n\n    const toolbarContainer = options.toolbarContainer;\n\n    if (toolbarContainer) {\n      toolbarContainer.appendChild(tool_bar.element);\n    } // resizingbar\n\n\n    const resizingBarContainer = options.resizingBarContainer;\n    if (resizing_bar && resizingBarContainer) resizingBarContainer.appendChild(resizing_bar);\n    /** append html */\n\n    editor_div.appendChild(textarea);\n    if (placeholder_span) editor_div.appendChild(placeholder_span);\n    if (!toolbarContainer) relative.appendChild(tool_bar.element);\n    relative.appendChild(sticky_dummy);\n    relative.appendChild(editor_div);\n    relative.appendChild(resize_back);\n    relative.appendChild(loading_box);\n    relative.appendChild(line_breaker);\n    relative.appendChild(line_breaker_t);\n    relative.appendChild(line_breaker_b);\n    if (resizing_bar && !resizingBarContainer) relative.appendChild(resizing_bar);\n    top_div.appendChild(relative);\n    textarea = this._checkCodeMirror(options, textarea);\n    return {\n      constructed: {\n        _top: top_div,\n        _relative: relative,\n        _toolBar: tool_bar.element,\n        _menuTray: tool_bar._menuTray,\n        _editorArea: editor_div,\n        _wysiwygArea: wysiwyg_div,\n        _codeArea: textarea,\n        _placeholder: placeholder_span,\n        _resizingBar: resizing_bar,\n        _navigation: navigation,\n        _charWrapper: char_wrapper,\n        _charCounter: char_counter,\n        _loading: loading_box,\n        _lineBreaker: line_breaker,\n        _lineBreaker_t: line_breaker_t,\n        _lineBreaker_b: line_breaker_b,\n        _resizeBack: resize_back,\n        _stickyDummy: sticky_dummy,\n        _arrow: arrow\n      },\n      options: options,\n      plugins: tool_bar.plugins,\n      pluginCallButtons: tool_bar.pluginCallButtons,\n      _responsiveButtons: tool_bar.responsiveButtons\n    };\n  },\n\n  /**\r\n   * @description Check the CodeMirror option to apply the CodeMirror and return the CodeMirror element.\r\n   * @param {Object} options options\r\n   * @param {Element} textarea textarea element\r\n   * @private\r\n   */\n  _checkCodeMirror: function (options, textarea) {\n    if (options.codeMirror) {\n      const cmOptions = [{\n        mode: 'htmlmixed',\n        htmlMode: true,\n        lineNumbers: true,\n        lineWrapping: true\n      }, options.codeMirror.options || {}].reduce(function (init, option) {\n        for (let key in option) {\n          if (util.hasOwn(option, key)) init[key] = option[key];\n        }\n\n        return init;\n      }, {});\n\n      if (options.height === 'auto') {\n        cmOptions.viewportMargin = Infinity;\n        cmOptions.height = 'auto';\n      }\n\n      const cm = options.codeMirror.src.fromTextArea(textarea, cmOptions);\n      cm.display.wrapper.style.cssText = textarea.style.cssText;\n      options.codeMirrorEditor = cm;\n      textarea = cm.display.wrapper;\n      textarea.className += ' se-wrapper-code-mirror';\n    }\n\n    return textarea;\n  },\n\n  /**\r\n   * @description Check for a katex object.\r\n   * @param {Object} katex katex object\r\n   * @private\r\n   */\n  _checkKatexMath: function (katex) {\n    if (!katex) throw Error('[SUNEDITOR.create.fail] To use the math button you need to add a \"katex\" object to the options.');\n    const katexOptions = [{\n      throwOnError: false\n    }, katex.options || {}].reduce(function (init, option) {\n      for (let key in option) {\n        if (util.hasOwn(option, key)) init[key] = option[key];\n      }\n\n      return init;\n    }, {});\n    katex.options = katexOptions;\n  },\n\n  /**\r\n   * @description Add or reset options\r\n   * @param {Object} mergeOptions New options property\r\n   * @param {Object} context Context object of core\r\n   * @param {Object} originOptions Origin options\r\n   * @returns {Object} pluginCallButtons\r\n   * @private\r\n   */\n  _setOptions: function (mergeOptions, context, originOptions) {\n    this._initOptions(context.element.originElement, mergeOptions);\n\n    const el = context.element;\n    const relative = el.relative;\n    const editorArea = el.editorArea;\n    const isNewToolbarContainer = mergeOptions.toolbarContainer && mergeOptions.toolbarContainer !== originOptions.toolbarContainer;\n    const isNewToolbar = mergeOptions.lang !== originOptions.lang || mergeOptions.buttonList !== originOptions.buttonList || mergeOptions.mode !== originOptions.mode || isNewToolbarContainer;\n\n    const tool_bar = this._createToolBar(document, isNewToolbar ? mergeOptions.buttonList : originOptions.buttonList, mergeOptions.plugins, mergeOptions);\n\n    if (tool_bar.pluginCallButtons.math) this._checkKatexMath(mergeOptions.katex);\n    const arrow = document.createElement('DIV');\n    arrow.className = 'se-arrow';\n\n    if (isNewToolbar) {\n      tool_bar.element.style.visibility = 'hidden'; // toolbar container\n\n      if (isNewToolbarContainer) {\n        mergeOptions.toolbarContainer.appendChild(tool_bar.element);\n        el.toolbar.parentElement.removeChild(el.toolbar);\n      } else {\n        el.toolbar.parentElement.replaceChild(tool_bar.element, el.toolbar);\n      }\n\n      el.toolbar = tool_bar.element;\n      el._menuTray = tool_bar._menuTray;\n      el._arrow = arrow;\n    }\n\n    const initElements = this._initElements(mergeOptions, el.topArea, isNewToolbar ? tool_bar.element : el.toolbar, arrow);\n\n    const bottomBar = initElements.bottomBar;\n    const wysiwygFrame = initElements.wysiwygFrame;\n    const placeholder_span = initElements.placeholder;\n    let code = initElements.codeView;\n    if (el.resizingBar) util.removeItem(el.resizingBar);\n\n    if (bottomBar.resizingBar) {\n      if (mergeOptions.resizingBarContainer && mergeOptions.resizingBarContainer !== originOptions.resizingBarContainer) {\n        mergeOptions.resizingBarContainer.appendChild(bottomBar.resizingBar);\n      } else {\n        relative.appendChild(bottomBar.resizingBar);\n      }\n    }\n\n    editorArea.innerHTML = '';\n    editorArea.appendChild(code);\n    if (placeholder_span) editorArea.appendChild(placeholder_span);\n    code = this._checkCodeMirror(mergeOptions, code);\n    el.resizingBar = bottomBar.resizingBar;\n    el.navigation = bottomBar.navigation;\n    el.charWrapper = bottomBar.charWrapper;\n    el.charCounter = bottomBar.charCounter;\n    el.wysiwygFrame = wysiwygFrame;\n    el.code = code;\n    el.placeholder = placeholder_span;\n    if (mergeOptions.rtl) util.addClass(el.topArea, 'se-rtl');else util.removeClass(el.topArea, 'se-rtl');\n    return {\n      callButtons: tool_bar.pluginCallButtons,\n      plugins: tool_bar.plugins,\n      toolbar: tool_bar\n    };\n  },\n\n  /**\r\n   * @description Initialize property of suneditor elements\r\n   * @param {Object} options Options\r\n   * @param {Element} topDiv Suneditor top div\r\n   * @param {Element} toolBar Tool bar\r\n   * @param {Element} toolBarArrow Tool bar arrow (balloon editor)\r\n   * @returns {Object} Bottom bar elements (resizingBar, navigation, charWrapper, charCounter)\r\n   * @private\r\n   */\n  _initElements: function (options, topDiv, toolBar, toolBarArrow) {\n    /** top div */\n    topDiv.style.cssText = options._editorStyles.top;\n    /** toolbar */\n\n    if (/inline/i.test(options.mode)) {\n      toolBar.className += ' se-toolbar-inline';\n      toolBar.style.width = options.toolbarWidth;\n    } else if (/balloon/i.test(options.mode)) {\n      toolBar.className += ' se-toolbar-balloon';\n      toolBar.style.width = options.toolbarWidth;\n      toolBar.appendChild(toolBarArrow);\n    }\n    /** editor */\n    // wysiwyg div or iframe\n\n\n    const wysiwygDiv = document.createElement(!options.iframe ? 'DIV' : 'IFRAME');\n    wysiwygDiv.className = 'se-wrapper-inner se-wrapper-wysiwyg';\n\n    if (!options.iframe) {\n      wysiwygDiv.setAttribute('contenteditable', true);\n      wysiwygDiv.setAttribute('scrolling', 'auto');\n\n      for (let key in options.iframeAttributes) {\n        wysiwygDiv.setAttribute(key, options.iframeAttributes[key]);\n      }\n\n      wysiwygDiv.className += ' ' + options._editableClass;\n      wysiwygDiv.style.cssText = options._editorStyles.frame + options._editorStyles.editor;\n    } else {\n      wysiwygDiv.allowFullscreen = true;\n      wysiwygDiv.frameBorder = 0;\n      wysiwygDiv.style.cssText = options._editorStyles.frame;\n    } // textarea for code view\n\n\n    const textarea = document.createElement('TEXTAREA');\n    textarea.className = 'se-wrapper-inner se-wrapper-code';\n    textarea.style.cssText = options._editorStyles.frame;\n    textarea.style.display = 'none';\n    if (options.height === 'auto') textarea.style.overflow = 'hidden';\n    /** resize bar */\n\n    let resizingBar = null;\n    let navigation = null;\n    let charWrapper = null;\n    let charCounter = null;\n\n    if (options.resizingBar) {\n      resizingBar = document.createElement('DIV');\n      resizingBar.className = 'se-resizing-bar sun-editor-common';\n      /** navigation */\n\n      navigation = document.createElement('DIV');\n      navigation.className = 'se-navigation sun-editor-common';\n      resizingBar.appendChild(navigation);\n      /** char counter */\n\n      if (options.charCounter) {\n        charWrapper = document.createElement('DIV');\n        charWrapper.className = 'se-char-counter-wrapper';\n\n        if (options.charCounterLabel) {\n          const charLabel = document.createElement('SPAN');\n          charLabel.className = 'se-char-label';\n          charLabel.textContent = options.charCounterLabel;\n          charWrapper.appendChild(charLabel);\n        }\n\n        charCounter = document.createElement('SPAN');\n        charCounter.className = 'se-char-counter';\n        charCounter.textContent = '0';\n        charWrapper.appendChild(charCounter);\n\n        if (options.maxCharCount > 0) {\n          const char_max = document.createElement('SPAN');\n          char_max.textContent = ' / ' + options.maxCharCount;\n          charWrapper.appendChild(char_max);\n        }\n\n        resizingBar.appendChild(charWrapper);\n      }\n    }\n\n    let placeholder = null;\n\n    if (options.placeholder) {\n      placeholder = document.createElement('SPAN');\n      placeholder.className = 'se-placeholder';\n      placeholder.innerText = options.placeholder;\n    }\n\n    return {\n      bottomBar: {\n        resizingBar: resizingBar,\n        navigation: navigation,\n        charWrapper: charWrapper,\n        charCounter: charCounter\n      },\n      wysiwygFrame: wysiwygDiv,\n      codeView: textarea,\n      placeholder: placeholder\n    };\n  },\n\n  /**\r\n   * @description Initialize options\r\n   * @param {Element} element Options object\r\n   * @param {Object} options Options object\r\n   * @private\r\n   */\n  _initOptions: function (element, options) {\n    /** Values */\n    options.lang = options.lang || _defaultLang;\n    options.defaultTag = typeof options.defaultTag === 'string' && options.defaultTag.length > 0 ? options.defaultTag : 'p';\n    const textTags = options.textTags = [{\n      bold: 'STRONG',\n      underline: 'U',\n      italic: 'EM',\n      strike: 'DEL',\n      sub: 'SUB',\n      sup: 'SUP'\n    }, options.textTags || {}].reduce(function (_default, _new) {\n      for (let key in _new) {\n        _default[key] = _new[key];\n      }\n\n      return _default;\n    }, {});\n    options._textTagsMap = {\n      'strong': textTags.bold.toLowerCase(),\n      'b': textTags.bold.toLowerCase(),\n      'u': textTags.underline.toLowerCase(),\n      'ins': textTags.underline.toLowerCase(),\n      'em': textTags.italic.toLowerCase(),\n      'i': textTags.italic.toLowerCase(),\n      'del': textTags.strike.toLowerCase(),\n      'strike': textTags.strike.toLowerCase(),\n      's': textTags.strike.toLowerCase(),\n      'sub': textTags.sub.toLowerCase(),\n      'sup': textTags.sup.toLowerCase()\n    };\n    options.value = typeof options.value === 'string' ? options.value : null;\n    options.historyStackDelayTime = typeof options.historyStackDelayTime === 'number' ? options.historyStackDelayTime : 400;\n    /** Whitelist, Blacklist */\n\n    const whitelist = 'br|p|div|pre|blockquote|h1|h2|h3|h4|h5|h6|ol|ul|li|hr|figure|figcaption|img|iframe|audio|video|source|table|thead|tbody|tr|th|td|a|b|strong|var|i|em|u|ins|s|span|strike|del|sub|sup|code|svg|path|details|summary'; // tags\n\n    options.tagsBlacklist = options.tagsBlacklist || '';\n    options._defaultTagsWhitelist = typeof options._defaultTagsWhitelist === 'string' ? options._defaultTagsWhitelist : whitelist;\n    options._editorTagsWhitelist = options.addTagsWhitelist === '*' ? '*' : this._setWhitelist(options._defaultTagsWhitelist + (typeof options.addTagsWhitelist === 'string' && options.addTagsWhitelist.length > 0 ? '|' + options.addTagsWhitelist : ''), options.tagsBlacklist); // paste tags\n\n    options.pasteTagsBlacklist = options.tagsBlacklist + (options.tagsBlacklist && options.pasteTagsBlacklist ? '|' + options.pasteTagsBlacklist : options.pasteTagsBlacklist || '');\n    options.pasteTagsWhitelist = options.pasteTagsWhitelist === '*' ? '*' : this._setWhitelist(typeof options.pasteTagsWhitelist === 'string' ? options.pasteTagsWhitelist : options._editorTagsWhitelist, options.pasteTagsBlacklist); // tag attributes\n\n    options.attributesWhitelist = !options.attributesWhitelist || typeof options.attributesWhitelist !== 'object' ? null : options.attributesWhitelist;\n    options.attributesBlacklist = !options.attributesBlacklist || typeof options.attributesBlacklist !== 'object' ? null : options.attributesBlacklist;\n    /** Layout */\n\n    options.mode = options.mode || 'classic'; // classic, inline, balloon, balloon-always\n\n    options.rtl = !!options.rtl;\n    options.lineAttrReset = typeof options.lineAttrReset === 'string' && options.lineAttrReset ? options.lineAttrReset === '*' ? '*' : new RegExp('^(' + options.lineAttrReset + ')$', 'i') : null;\n    options._editableClass = 'sun-editor-editable' + (options.rtl ? ' se-rtl' : '');\n    options._printClass = typeof options._printClass === 'string' ? options._printClass : null;\n    options.toolbarWidth = options.toolbarWidth ? util.isNumber(options.toolbarWidth) ? options.toolbarWidth + 'px' : options.toolbarWidth : 'auto';\n    options.toolbarContainer = typeof options.toolbarContainer === 'string' ? document.querySelector(options.toolbarContainer) : options.toolbarContainer;\n    options.stickyToolbar = /balloon/i.test(options.mode) || !!options.toolbarContainer ? -1 : options.stickyToolbar === undefined ? 0 : /^\\d+/.test(options.stickyToolbar) ? util.getNumber(options.stickyToolbar, 0) : -1;\n    options.fullScreenOffset = options.fullScreenOffset === undefined ? 0 : /^\\d+/.test(options.fullScreenOffset) ? util.getNumber(options.fullScreenOffset, 0) : 0;\n    options.fullPage = !!options.fullPage;\n    options.iframe = options.fullPage || !!options.iframe;\n    options.iframeAttributes = options.iframeAttributes || {};\n    options.iframeCSSFileName = options.iframe ? typeof options.iframeCSSFileName === 'string' ? [options.iframeCSSFileName] : options.iframeCSSFileName || ['suneditor'] : null;\n    options.previewTemplate = typeof options.previewTemplate === 'string' ? options.previewTemplate : null;\n    options.printTemplate = typeof options.printTemplate === 'string' ? options.printTemplate : null;\n    /** CodeMirror object */\n\n    options.codeMirror = options.codeMirror ? options.codeMirror.src ? options.codeMirror : {\n      src: options.codeMirror\n    } : null;\n    /** katex object (Math plugin) */\n\n    options.katex = options.katex ? options.katex.src ? options.katex : {\n      src: options.katex\n    } : null;\n    options.mathFontSize = !!options.mathFontSize ? options.mathFontSize : [{\n      text: '1',\n      value: '1em'\n    }, {\n      text: '1.5',\n      value: '1.5em'\n    }, {\n      text: '2',\n      value: '2em'\n    }, {\n      text: '2.5',\n      value: '2.5em'\n    }];\n    /** Display */\n\n    options.position = typeof options.position === 'string' ? options.position : null;\n    options.display = options.display || (element.style.display === 'none' || !element.style.display ? 'block' : element.style.display);\n    options.popupDisplay = options.popupDisplay || 'full';\n    /** Bottom resizing bar */\n\n    options.resizingBar = options.resizingBar === undefined ? /inline|balloon/i.test(options.mode) ? false : true : options.resizingBar;\n    options.showPathLabel = !options.resizingBar ? false : typeof options.showPathLabel === 'boolean' ? options.showPathLabel : true;\n    options.resizeEnable = options.resizeEnable === undefined ? true : !!options.resizeEnable;\n    options.resizingBarContainer = typeof options.resizingBarContainer === 'string' ? document.querySelector(options.resizingBarContainer) : options.resizingBarContainer;\n    /** Character count */\n\n    options.charCounter = options.maxCharCount > 0 ? true : typeof options.charCounter === 'boolean' ? options.charCounter : false;\n    options.charCounterType = typeof options.charCounterType === 'string' ? options.charCounterType : 'char';\n    options.charCounterLabel = typeof options.charCounterLabel === 'string' ? options.charCounterLabel.trim() : null;\n    options.maxCharCount = util.isNumber(options.maxCharCount) && options.maxCharCount > -1 ? options.maxCharCount * 1 : null;\n    /** Width size */\n\n    options.width = options.width ? util.isNumber(options.width) ? options.width + 'px' : options.width : element.clientWidth ? element.clientWidth + 'px' : '100%';\n    options.minWidth = (util.isNumber(options.minWidth) ? options.minWidth + 'px' : options.minWidth) || '';\n    options.maxWidth = (util.isNumber(options.maxWidth) ? options.maxWidth + 'px' : options.maxWidth) || '';\n    /** Height size */\n\n    options.height = options.height ? util.isNumber(options.height) ? options.height + 'px' : options.height : element.clientHeight ? element.clientHeight + 'px' : 'auto';\n    options.minHeight = (util.isNumber(options.minHeight) ? options.minHeight + 'px' : options.minHeight) || '';\n    options.maxHeight = (util.isNumber(options.maxHeight) ? options.maxHeight + 'px' : options.maxHeight) || '';\n    /** Editing area default style */\n\n    options.defaultStyle = typeof options.defaultStyle === 'string' ? options.defaultStyle : '';\n    /** Defining menu items */\n\n    options.font = !options.font ? null : options.font;\n    options.fontSize = !options.fontSize ? null : options.fontSize;\n    options.formats = !options.formats ? null : options.formats;\n    options.colorList = !options.colorList ? null : options.colorList;\n    options.lineHeights = !options.lineHeights ? null : options.lineHeights;\n    options.paragraphStyles = !options.paragraphStyles ? null : options.paragraphStyles;\n    options.textStyles = !options.textStyles ? null : options.textStyles;\n    options.fontSizeUnit = typeof options.fontSizeUnit === 'string' ? options.fontSizeUnit.trim() || 'px' : 'px';\n    options.alignItems = typeof options.alignItems === 'object' ? options.alignItems : options.rtl ? ['right', 'center', 'left', 'justify'] : ['left', 'center', 'right', 'justify'];\n    /** Image */\n\n    options.imageResizing = options.imageResizing === undefined ? true : options.imageResizing;\n    options.imageHeightShow = options.imageHeightShow === undefined ? true : !!options.imageHeightShow;\n    options.imageAlignShow = options.imageAlignShow === undefined ? true : !!options.imageAlignShow;\n    options.imageWidth = !options.imageWidth ? 'auto' : util.isNumber(options.imageWidth) ? options.imageWidth + 'px' : options.imageWidth;\n    options.imageHeight = !options.imageHeight ? 'auto' : util.isNumber(options.imageHeight) ? options.imageHeight + 'px' : options.imageHeight;\n    options.imageSizeOnlyPercentage = !!options.imageSizeOnlyPercentage;\n    options._imageSizeUnit = options.imageSizeOnlyPercentage ? '%' : 'px';\n    options.imageRotation = options.imageRotation !== undefined ? options.imageRotation : !(options.imageSizeOnlyPercentage || !options.imageHeightShow);\n    options.imageFileInput = options.imageFileInput === undefined ? true : options.imageFileInput;\n    options.imageUrlInput = options.imageUrlInput === undefined || !options.imageFileInput ? true : options.imageUrlInput;\n    options.imageUploadHeader = options.imageUploadHeader || null;\n    options.imageUploadUrl = typeof options.imageUploadUrl === 'string' ? options.imageUploadUrl : null;\n    options.imageUploadSizeLimit = /\\d+/.test(options.imageUploadSizeLimit) ? util.getNumber(options.imageUploadSizeLimit, 0) : null;\n    options.imageMultipleFile = !!options.imageMultipleFile;\n    options.imageAccept = typeof options.imageAccept !== 'string' || options.imageAccept.trim() === \"*\" ? 'image/*' : options.imageAccept.trim() || 'image/*';\n    /** Image - image gallery */\n\n    options.imageGalleryUrl = typeof options.imageGalleryUrl === 'string' ? options.imageGalleryUrl : null;\n    options.imageGalleryHeader = options.imageGalleryHeader || null;\n    /** Video */\n\n    options.videoResizing = options.videoResizing === undefined ? true : options.videoResizing;\n    options.videoHeightShow = options.videoHeightShow === undefined ? true : !!options.videoHeightShow;\n    options.videoAlignShow = options.videoAlignShow === undefined ? true : !!options.videoAlignShow;\n    options.videoRatioShow = options.videoRatioShow === undefined ? true : !!options.videoRatioShow;\n    options.videoWidth = !options.videoWidth || !util.getNumber(options.videoWidth, 0) ? '' : util.isNumber(options.videoWidth) ? options.videoWidth + 'px' : options.videoWidth;\n    options.videoHeight = !options.videoHeight || !util.getNumber(options.videoHeight, 0) ? '' : util.isNumber(options.videoHeight) ? options.videoHeight + 'px' : options.videoHeight;\n    options.videoSizeOnlyPercentage = !!options.videoSizeOnlyPercentage;\n    options._videoSizeUnit = options.videoSizeOnlyPercentage ? '%' : 'px';\n    options.videoRotation = options.videoRotation !== undefined ? options.videoRotation : !(options.videoSizeOnlyPercentage || !options.videoHeightShow);\n    options.videoRatio = util.getNumber(options.videoRatio, 4) || 0.5625;\n    options.videoRatioList = !options.videoRatioList ? null : options.videoRatioList;\n    options.youtubeQuery = (options.youtubeQuery || '').replace('?', '');\n    options.videoFileInput = !!options.videoFileInput;\n    options.videoUrlInput = options.videoUrlInput === undefined || !options.videoFileInput ? true : options.videoUrlInput;\n    options.videoUploadHeader = options.videoUploadHeader || null;\n    options.videoUploadUrl = typeof options.videoUploadUrl === 'string' ? options.videoUploadUrl : null;\n    options.videoUploadSizeLimit = /\\d+/.test(options.videoUploadSizeLimit) ? util.getNumber(options.videoUploadSizeLimit, 0) : null;\n    options.videoMultipleFile = !!options.videoMultipleFile;\n    options.videoTagAttrs = options.videoTagAttrs || null;\n    options.videoIframeAttrs = options.videoIframeAttrs || null;\n    options.videoAccept = typeof options.videoAccept !== 'string' || options.videoAccept.trim() === \"*\" ? 'video/*' : options.videoAccept.trim() || 'video/*';\n    /** Audio */\n\n    options.audioWidth = !options.audioWidth ? '' : util.isNumber(options.audioWidth) ? options.audioWidth + 'px' : options.audioWidth;\n    options.audioHeight = !options.audioHeight ? '' : util.isNumber(options.audioHeight) ? options.audioHeight + 'px' : options.audioHeight;\n    options.audioFileInput = !!options.audioFileInput;\n    options.audioUrlInput = options.audioUrlInput === undefined || !options.audioFileInput ? true : options.audioUrlInput;\n    options.audioUploadHeader = options.audioUploadHeader || null;\n    options.audioUploadUrl = typeof options.audioUploadUrl === 'string' ? options.audioUploadUrl : null;\n    options.audioUploadSizeLimit = /\\d+/.test(options.audioUploadSizeLimit) ? util.getNumber(options.audioUploadSizeLimit, 0) : null;\n    options.audioMultipleFile = !!options.audioMultipleFile;\n    options.audioTagAttrs = options.audioTagAttrs || null;\n    options.audioAccept = typeof options.audioAccept !== 'string' || options.audioAccept.trim() === \"*\" ? 'audio/*' : options.audioAccept.trim() || 'audio/*';\n    /** Table */\n\n    options.tableCellControllerPosition = typeof options.tableCellControllerPosition === 'string' ? options.tableCellControllerPosition.toLowerCase() : 'cell';\n    /** Link */\n\n    options.linkTargetNewWindow = !!options.linkTargetNewWindow;\n    options.linkProtocol = typeof options.linkProtocol === 'string' ? options.linkProtocol : null;\n    options.linkRel = Array.isArray(options.linkRel) ? options.linkRel : [];\n    options.linkRelDefault = options.linkRelDefault || {};\n    /** HR */\n    // options.hrItems = options.hrItems;\n\n    /** Key actions */\n\n    options.tabDisable = !!options.tabDisable;\n    options.shortcutsDisable = Array.isArray(options.shortcutsDisable) ? options.shortcutsDisable : [];\n    options.shortcutsHint = options.shortcutsHint === undefined ? true : !!options.shortcutsHint;\n    /** Defining save button */\n\n    options.callBackSave = !options.callBackSave ? null : options.callBackSave;\n    /** Templates Array */\n\n    options.templates = !options.templates ? null : options.templates;\n    /** ETC */\n\n    options.placeholder = typeof options.placeholder === 'string' ? options.placeholder : null;\n    options.mediaAutoSelect = options.mediaAutoSelect === undefined ? true : !!options.mediaAutoSelect;\n    /** Buttons */\n\n    options.buttonList = !!options.buttonList ? options.buttonList : [['undo', 'redo'], ['bold', 'underline', 'italic', 'strike', 'subscript', 'superscript'], ['removeFormat'], ['outdent', 'indent'], ['fullScreen', 'showBlocks', 'codeView'], ['preview', 'print']];\n    /** RTL - buttons */\n\n    if (options.rtl) {\n      options.buttonList = options.buttonList.reverse();\n    }\n    /** --- Define icons --- */\n    // custom icons\n\n\n    options.icons = !options.icons || typeof options.icons !== 'object' ? _icons : [_icons, options.icons].reduce(function (_default, _new) {\n      for (let key in _new) {\n        if (util.hasOwn(_new, key)) _default[key] = _new[key];\n      }\n\n      return _default;\n    }, {}); // rtl icons\n\n    options.icons = !options.rtl ? options.icons : [options.icons, options.icons.rtl].reduce(function (_default, _new) {\n      for (let key in _new) {\n        if (util.hasOwn(_new, key)) _default[key] = _new[key];\n      }\n\n      return _default;\n    }, {});\n    /** _init options */\n\n    options._editorStyles = util._setDefaultOptionStyle(options, options.defaultStyle);\n  },\n  _setWhitelist: function (whitelist, blacklist) {\n    if (typeof blacklist !== 'string') return whitelist;\n    blacklist = blacklist.split('|');\n    whitelist = whitelist.split('|');\n\n    for (let i = 0, len = blacklist.length, index; i < len; i++) {\n      index = whitelist.indexOf(blacklist[i]);\n      if (index > -1) whitelist.splice(index, 1);\n    }\n\n    return whitelist.join('|');\n  },\n\n  /**\r\n   * @description Suneditor's Default button list\r\n   * @param {Object} options options\r\n   * @private\r\n   */\n  _defaultButtons: function (options) {\n    const icons = options.icons;\n    const lang = options.lang;\n    const cmd = util.isOSX_IOS ? '⌘' : 'CTRL';\n    const addShift = util.isOSX_IOS ? '⇧' : '+SHIFT';\n    const shortcutsDisable = !options.shortcutsHint ? ['bold', 'strike', 'underline', 'italic', 'undo', 'indent', 'save'] : options.shortcutsDisable;\n    const indentKey = options.rtl ? ['[', ']'] : [']', '['];\n    return {\n      /** default command */\n      bold: ['_se_command_bold', lang.toolbar.bold + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('bold') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">B</span>') + '</span>', 'bold', '', icons.bold],\n      underline: ['_se_command_underline', lang.toolbar.underline + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('underline') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">U</span>') + '</span>', 'underline', '', icons.underline],\n      italic: ['_se_command_italic', lang.toolbar.italic + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('italic') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">I</span>') + '</span>', 'italic', '', icons.italic],\n      strike: ['_se_command_strike', lang.toolbar.strike + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('strike') > -1 ? '' : cmd + addShift + '+<span class=\"se-shortcut-key\">S</span>') + '</span>', 'strike', '', icons.strike],\n      subscript: ['_se_command_subscript', lang.toolbar.subscript, 'SUB', '', icons.subscript],\n      superscript: ['_se_command_superscript', lang.toolbar.superscript, 'SUP', '', icons.superscript],\n      removeFormat: ['', lang.toolbar.removeFormat, 'removeFormat', '', icons.erase],\n      indent: ['_se_command_indent', lang.toolbar.indent + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('indent') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">' + indentKey[0] + '</span>') + '</span>', 'indent', '', icons.outdent],\n      outdent: ['_se_command_outdent', lang.toolbar.outdent + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('indent') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">' + indentKey[1] + '</span>') + '</span>', 'outdent', '', icons.indent],\n      fullScreen: ['se-code-view-enabled se-resizing-enabled _se_command_fullScreen', lang.toolbar.fullScreen, 'fullScreen', '', icons.expansion],\n      showBlocks: ['_se_command_showBlocks', lang.toolbar.showBlocks, 'showBlocks', '', icons.show_blocks],\n      codeView: ['se-code-view-enabled se-resizing-enabled _se_command_codeView', lang.toolbar.codeView, 'codeView', '', icons.code_view],\n      undo: ['_se_command_undo', lang.toolbar.undo + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('undo') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">Z</span>') + '</span>', 'undo', '', icons.undo],\n      redo: ['_se_command_redo', lang.toolbar.redo + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('undo') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">Y</span> / ' + cmd + addShift + '+<span class=\"se-shortcut-key\">Z</span>') + '</span>', 'redo', '', icons.redo],\n      preview: ['se-resizing-enabled', lang.toolbar.preview, 'preview', '', icons.preview],\n      print: ['se-resizing-enabled', lang.toolbar.print, 'print', '', icons.print],\n      dir: ['_se_command_dir', lang.toolbar[options.rtl ? 'dir_ltr' : 'dir_rtl'], 'dir', '', icons[options.rtl ? 'dir_ltr' : 'dir_rtl']],\n      dir_ltr: ['_se_command_dir_ltr', lang.toolbar.dir_ltr, 'dir_ltr', '', icons.dir_ltr],\n      dir_rtl: ['_se_command_dir_rtl', lang.toolbar.dir_rtl, 'dir_rtl', '', icons.dir_rtl],\n      save: ['_se_command_save se-resizing-enabled', lang.toolbar.save + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('save') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">S</span>') + '</span>', 'save', '', icons.save],\n\n      /** plugins - command */\n      blockquote: ['', lang.toolbar.tag_blockquote, 'blockquote', 'command', icons.blockquote],\n\n      /** plugins - submenu */\n      font: ['se-btn-select se-btn-tool-font', lang.toolbar.font, 'font', 'submenu', '<span class=\"txt\">' + lang.toolbar.font + '</span>' + icons.arrow_down],\n      formatBlock: ['se-btn-select se-btn-tool-format', lang.toolbar.formats, 'formatBlock', 'submenu', '<span class=\"txt\">' + lang.toolbar.formats + '</span>' + icons.arrow_down],\n      fontSize: ['se-btn-select se-btn-tool-size', lang.toolbar.fontSize, 'fontSize', 'submenu', '<span class=\"txt\">' + lang.toolbar.fontSize + '</span>' + icons.arrow_down],\n      fontColor: ['', lang.toolbar.fontColor, 'fontColor', 'submenu', icons.font_color],\n      hiliteColor: ['', lang.toolbar.hiliteColor, 'hiliteColor', 'submenu', icons.highlight_color],\n      align: ['se-btn-align', lang.toolbar.align, 'align', 'submenu', options.rtl ? icons.align_right : icons.align_left],\n      list: ['', lang.toolbar.list, 'list', 'submenu', icons.list_number],\n      horizontalRule: ['btn_line', lang.toolbar.horizontalRule, 'horizontalRule', 'submenu', icons.horizontal_rule],\n      table: ['', lang.toolbar.table, 'table', 'submenu', icons.table],\n      lineHeight: ['', lang.toolbar.lineHeight, 'lineHeight', 'submenu', icons.line_height],\n      template: ['', lang.toolbar.template, 'template', 'submenu', icons.template],\n      paragraphStyle: ['', lang.toolbar.paragraphStyle, 'paragraphStyle', 'submenu', icons.paragraph_style],\n      textStyle: ['', lang.toolbar.textStyle, 'textStyle', 'submenu', icons.text_style],\n\n      /** plugins - dialog */\n      link: ['', lang.toolbar.link, 'link', 'dialog', icons.link],\n      image: ['', lang.toolbar.image, 'image', 'dialog', icons.image],\n      video: ['', lang.toolbar.video, 'video', 'dialog', icons.video],\n      audio: ['', lang.toolbar.audio, 'audio', 'dialog', icons.audio],\n      math: ['', lang.toolbar.math, 'math', 'dialog', icons.math],\n\n      /** plugins - fileBrowser */\n      imageGallery: ['', lang.toolbar.imageGallery, 'imageGallery', 'fileBrowser', icons.image_gallery]\n    };\n  },\n\n  /**\r\n   * @description Create a group div containing each module\r\n   * @returns {Object}\r\n   * @private\r\n   */\n  _createModuleGroup: function () {\n    const oDiv = util.createElement('DIV');\n    oDiv.className = 'se-btn-module se-btn-module-border';\n    const oUl = util.createElement('UL');\n    oUl.className = 'se-menu-list';\n    oDiv.appendChild(oUl);\n    return {\n      'div': oDiv,\n      'ul': oUl\n    };\n  },\n\n  /**\r\n   * @description Create a button element\r\n   * @param {string} buttonClass className in button\r\n   * @param {string} title Title in button\r\n   * @param {string} dataCommand The data-command property of the button\r\n   * @param {string} dataDisplay The data-display property of the button ('dialog', 'submenu', 'command')\r\n   * @param {string} innerHTML Html in button\r\n   * @param {string} _disabled Button disabled\r\n   * @param {Object} _icons Icons\r\n   * @returns {Object}\r\n   * @private\r\n   */\n  _createButton: function (buttonClass, title, dataCommand, dataDisplay, innerHTML, _disabled, _icons) {\n    const oLi = util.createElement('LI');\n    const oButton = util.createElement('BUTTON');\n    oButton.setAttribute('type', 'button');\n    oButton.setAttribute('class', 'se-btn' + (buttonClass ? ' ' + buttonClass : '') + ' se-tooltip');\n    oButton.setAttribute('data-command', dataCommand);\n    oButton.setAttribute('data-display', dataDisplay);\n    oButton.setAttribute('tabindex', '-1');\n    if (!innerHTML) innerHTML = '<span class=\"se-icon-text\">!</span>';\n\n    if (/^default\\./i.test(innerHTML)) {\n      innerHTML = _icons[innerHTML.replace(/^default\\./i, '')];\n    }\n\n    if (/^text\\./i.test(innerHTML)) {\n      innerHTML = innerHTML.replace(/^text\\./i, '');\n      oButton.className += ' se-btn-more-text';\n    }\n\n    innerHTML += '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + (title || dataCommand) + '</span></span>';\n    if (_disabled) oButton.setAttribute('disabled', true);\n    oButton.innerHTML = innerHTML;\n    oLi.appendChild(oButton);\n    return {\n      'li': oLi,\n      'button': oButton\n    };\n  },\n\n  /**\r\n   * @description Create editor HTML\r\n   * @param {Array} doc document object\r\n   * @param {Array} buttonList option.buttonList\r\n   * @param {Array|Object|null} _plugins Plugins\r\n   * @param {Array} options options\r\n   * @returns {Object} { element: (Element) Toolbar element, plugins: (Array|null) Plugins Array, pluginCallButtons: (Object), responsiveButtons: (Array) }\r\n   * @private\r\n   */\n  _createToolBar: function (doc, buttonList, _plugins, options) {\n    const separator_vertical = doc.createElement('DIV');\n    separator_vertical.className = 'se-toolbar-separator-vertical';\n    const tool_bar = doc.createElement('DIV');\n    tool_bar.className = 'se-toolbar sun-editor-common';\n\n    const _buttonTray = doc.createElement('DIV');\n\n    _buttonTray.className = 'se-btn-tray';\n    tool_bar.appendChild(_buttonTray);\n    /** create button list */\n\n    buttonList = JSON.parse(JSON.stringify(buttonList));\n    const icons = options.icons;\n\n    const defaultButtonList = this._defaultButtons(options);\n\n    const pluginCallButtons = {};\n    const responsiveButtons = [];\n    const plugins = {};\n\n    if (_plugins) {\n      const pluginsValues = _plugins.length ? _plugins : Object.keys(_plugins).map(function (name) {\n        return _plugins[name];\n      });\n\n      for (let i = 0, len = pluginsValues.length, p; i < len; i++) {\n        p = pluginsValues[i].default || pluginsValues[i];\n        plugins[p.name] = p;\n      }\n    }\n\n    let module = null;\n    let button = null;\n    let moduleElement = null;\n    let buttonElement = null;\n    let pluginName = '';\n    let vertical = false;\n    const moreLayer = util.createElement('DIV');\n    moreLayer.className = 'se-toolbar-more-layer';\n\n    buttonGroupLoop: for (let i = 0, more, moreContainer, moreCommand, buttonGroup, align; i < buttonList.length; i++) {\n      more = false;\n      align = '';\n      buttonGroup = buttonList[i];\n      moduleElement = this._createModuleGroup(); // button object\n\n      if (typeof buttonGroup === 'object') {\n        // buttons loop\n        for (let j = 0, moreButton; j < buttonGroup.length; j++) {\n          button = buttonGroup[j];\n          moreButton = false;\n\n          if (/^\\%\\d+/.test(button) && j === 0) {\n            buttonGroup[0] = button.replace(/[^\\d]/g, '');\n            responsiveButtons.push(buttonGroup);\n            buttonList.splice(i--, 1);\n            continue buttonGroupLoop;\n          }\n\n          if (typeof button === 'object') {\n            if (typeof button.add === 'function') {\n              pluginName = button.name;\n              module = defaultButtonList[pluginName];\n              plugins[pluginName] = button;\n            } else {\n              pluginName = button.name;\n              module = [button.buttonClass, button.title, button.name, button.dataDisplay, button.innerHTML, button._disabled];\n            }\n          } else {\n            // align\n            if (/^\\-/.test(button)) {\n              align = button.substr(1);\n              moduleElement.div.className += ' module-float-' + align;\n              continue;\n            } // rtl fix\n\n\n            if (/^\\#/.test(button)) {\n              const option = button.substr(1);\n              if (option === 'fix') moduleElement.ul.className += ' se-menu-dir-fix';\n              continue;\n            } // more button\n\n\n            if (/^\\:/.test(button)) {\n              moreButton = true;\n              const matched = button.match(/^\\:([^\\-]+)\\-([^\\-]+)\\-([^\\-]+)/);\n              moreCommand = '__se__' + matched[1].trim();\n              const title = matched[2].trim();\n              const innerHTML = matched[3].trim();\n              module = ['se-btn-more', title, moreCommand, 'MORE', innerHTML];\n            } // buttons\n            else {\n              module = defaultButtonList[button];\n            }\n\n            pluginName = button;\n\n            if (!module) {\n              const custom = plugins[pluginName];\n              if (!custom) throw Error('[SUNEDITOR.create.toolbar.fail] The button name of a plugin that does not exist. [' + pluginName + ']');\n              module = [custom.buttonClass, custom.title, custom.name, custom.display, custom.innerHTML, custom._disabled];\n            }\n          }\n\n          buttonElement = this._createButton(module[0], module[1], module[2], module[3], module[4], module[5], icons);\n          (more ? moreContainer : moduleElement.ul).appendChild(buttonElement.li);\n\n          if (plugins[pluginName]) {\n            pluginCallButtons[pluginName] = buttonElement.button;\n          } // more button\n\n\n          if (moreButton) {\n            more = true;\n            moreContainer = util.createElement('DIV');\n            moreContainer.className = 'se-more-layer ' + moreCommand;\n            moreContainer.innerHTML = '<div class=\"se-more-form\"><ul class=\"se-menu-list\"' + (align ? ' style=\"float: ' + align + ';\"' : '') + '></ul></div>';\n            moreLayer.appendChild(moreContainer);\n            moreContainer = moreContainer.firstElementChild.firstElementChild;\n          }\n        }\n\n        if (vertical) {\n          const sv = separator_vertical.cloneNode(false);\n\n          _buttonTray.appendChild(sv);\n        }\n\n        _buttonTray.appendChild(moduleElement.div);\n\n        vertical = true;\n      }\n      /** line break  */\n      else if (/^\\/$/.test(buttonGroup)) {\n        const enterDiv = doc.createElement('DIV');\n        enterDiv.className = 'se-btn-module-enter';\n\n        _buttonTray.appendChild(enterDiv);\n\n        vertical = false;\n      }\n    }\n\n    switch (_buttonTray.children.length) {\n      case 0:\n        _buttonTray.style.display = 'none';\n        break;\n\n      case 1:\n        util.removeClass(_buttonTray.firstElementChild, 'se-btn-module-border');\n        break;\n\n      default:\n        if (options.rtl) {\n          const sv = separator_vertical.cloneNode(false);\n          sv.style.float = _buttonTray.lastElementChild.style.float;\n\n          _buttonTray.appendChild(sv);\n        }\n\n    }\n\n    if (responsiveButtons.length > 0) responsiveButtons.unshift(buttonList);\n    if (moreLayer.children.length > 0) _buttonTray.appendChild(moreLayer); // menu tray\n\n    const _menuTray = doc.createElement('DIV');\n\n    _menuTray.className = 'se-menu-tray';\n    tool_bar.appendChild(_menuTray); // cover\n\n    const tool_cover = doc.createElement('DIV');\n    tool_cover.className = 'se-toolbar-cover';\n    tool_bar.appendChild(tool_cover);\n    return {\n      'element': tool_bar,\n      'plugins': plugins,\n      'pluginCallButtons': pluginCallButtons,\n      'responsiveButtons': responsiveButtons,\n      '_menuTray': _menuTray,\n      '_buttonTray': _buttonTray\n    };\n  }\n};","map":{"version":3,"sources":["C:/Users/Digel/Desktop/repos/RCFD-Website-with-React/node_modules/suneditor/src/lib/constructor.js"],"names":["_icons","_defaultLang","util","init","element","options","doc","document","_initOptions","top_div","createElement","className","rtl","id","relative","tool_bar","_createToolBar","buttonList","plugins","style","visibility","pluginCallButtons","math","_checkKatexMath","katex","arrow","sticky_dummy","editor_div","initElements","_initElements","bottomBar","wysiwyg_div","wysiwygFrame","placeholder_span","placeholder","textarea","codeView","resizing_bar","resizingBar","navigation","char_wrapper","charWrapper","char_counter","charCounter","loading_box","innerHTML","line_breaker","icons","line_break","line_breaker_t","line_breaker_b","cloneNode","resize_back","toolbarContainer","appendChild","resizingBarContainer","_checkCodeMirror","constructed","_top","_relative","_toolBar","_menuTray","_editorArea","_wysiwygArea","_codeArea","_placeholder","_resizingBar","_navigation","_charWrapper","_charCounter","_loading","_lineBreaker","_lineBreaker_t","_lineBreaker_b","_resizeBack","_stickyDummy","_arrow","_responsiveButtons","responsiveButtons","codeMirror","cmOptions","mode","htmlMode","lineNumbers","lineWrapping","reduce","option","key","hasOwn","height","viewportMargin","Infinity","cm","src","fromTextArea","display","wrapper","cssText","codeMirrorEditor","Error","katexOptions","throwOnError","_setOptions","mergeOptions","context","originOptions","originElement","el","editorArea","isNewToolbarContainer","isNewToolbar","lang","toolbar","parentElement","removeChild","replaceChild","topArea","code","removeItem","addClass","removeClass","callButtons","topDiv","toolBar","toolBarArrow","_editorStyles","top","test","width","toolbarWidth","wysiwygDiv","iframe","setAttribute","iframeAttributes","_editableClass","frame","editor","allowFullscreen","frameBorder","overflow","charCounterLabel","charLabel","textContent","maxCharCount","char_max","innerText","defaultTag","length","textTags","bold","underline","italic","strike","sub","sup","_default","_new","_textTagsMap","toLowerCase","value","historyStackDelayTime","whitelist","tagsBlacklist","_defaultTagsWhitelist","_editorTagsWhitelist","addTagsWhitelist","_setWhitelist","pasteTagsBlacklist","pasteTagsWhitelist","attributesWhitelist","attributesBlacklist","lineAttrReset","RegExp","_printClass","isNumber","querySelector","stickyToolbar","undefined","getNumber","fullScreenOffset","fullPage","iframeCSSFileName","previewTemplate","printTemplate","mathFontSize","text","position","popupDisplay","showPathLabel","resizeEnable","charCounterType","trim","clientWidth","minWidth","maxWidth","clientHeight","minHeight","maxHeight","defaultStyle","font","fontSize","formats","colorList","lineHeights","paragraphStyles","textStyles","fontSizeUnit","alignItems","imageResizing","imageHeightShow","imageAlignShow","imageWidth","imageHeight","imageSizeOnlyPercentage","_imageSizeUnit","imageRotation","imageFileInput","imageUrlInput","imageUploadHeader","imageUploadUrl","imageUploadSizeLimit","imageMultipleFile","imageAccept","imageGalleryUrl","imageGalleryHeader","videoResizing","videoHeightShow","videoAlignShow","videoRatioShow","videoWidth","videoHeight","videoSizeOnlyPercentage","_videoSizeUnit","videoRotation","videoRatio","videoRatioList","youtubeQuery","replace","videoFileInput","videoUrlInput","videoUploadHeader","videoUploadUrl","videoUploadSizeLimit","videoMultipleFile","videoTagAttrs","videoIframeAttrs","videoAccept","audioWidth","audioHeight","audioFileInput","audioUrlInput","audioUploadHeader","audioUploadUrl","audioUploadSizeLimit","audioMultipleFile","audioTagAttrs","audioAccept","tableCellControllerPosition","linkTargetNewWindow","linkProtocol","linkRel","Array","isArray","linkRelDefault","tabDisable","shortcutsDisable","shortcutsHint","callBackSave","templates","mediaAutoSelect","reverse","_setDefaultOptionStyle","blacklist","split","i","len","index","indexOf","splice","join","_defaultButtons","cmd","isOSX_IOS","addShift","indentKey","subscript","superscript","removeFormat","erase","indent","outdent","fullScreen","expansion","showBlocks","show_blocks","code_view","undo","redo","preview","print","dir","dir_ltr","dir_rtl","save","blockquote","tag_blockquote","arrow_down","formatBlock","fontColor","font_color","hiliteColor","highlight_color","align","align_right","align_left","list","list_number","horizontalRule","horizontal_rule","table","lineHeight","line_height","template","paragraphStyle","paragraph_style","textStyle","text_style","link","image","video","audio","imageGallery","image_gallery","_createModuleGroup","oDiv","oUl","_createButton","buttonClass","title","dataCommand","dataDisplay","_disabled","oLi","oButton","_plugins","separator_vertical","_buttonTray","JSON","parse","stringify","defaultButtonList","pluginsValues","Object","keys","map","name","p","default","module","button","moduleElement","buttonElement","pluginName","vertical","moreLayer","buttonGroupLoop","more","moreContainer","moreCommand","buttonGroup","j","moreButton","push","add","substr","div","ul","matched","match","custom","li","firstElementChild","sv","enterDiv","children","float","lastElementChild","unshift","tool_cover"],"mappings":"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","sourcesContent":["/*\r\n * wysiwyg web editor\r\n *\r\n * suneditor.js\r\n * Copyright 2017 JiHong Lee.\r\n * MIT license.\r\n */\r\n'use strict';\r\n\r\nimport _icons from '../assets/defaultIcons';\r\nimport _defaultLang from '../lang/en';\r\nimport util from './util';\r\n\r\nexport default {\r\n    /**\r\n     * @description document create\r\n     * @param {Element} element Textarea\r\n     * @param {Object} options Options\r\n     * @returns {Object}\r\n     */\r\n    init: function (element, options) {\r\n        if (typeof options !== 'object') options = {};\r\n\r\n        const doc = document;\r\n\r\n        /** --- init options --- */\r\n        this._initOptions(element, options);\r\n    \r\n        // suneditor div\r\n        const top_div = doc.createElement('DIV');\r\n        top_div.className = 'sun-editor' + (options.rtl ? ' se-rtl' : '');\r\n        if (element.id) top_div.id = 'suneditor_' + element.id;\r\n    \r\n        // relative div\r\n        const relative = doc.createElement('DIV');\r\n        relative.className = 'se-container';\r\n    \r\n        // toolbar\r\n        const tool_bar = this._createToolBar(doc, options.buttonList, options.plugins, options);\r\n        tool_bar.element.style.visibility = 'hidden';\r\n        if (tool_bar.pluginCallButtons.math) this._checkKatexMath(options.katex);\r\n        const arrow = doc.createElement('DIV');\r\n        arrow.className = 'se-arrow';\r\n\r\n        // sticky toolbar dummy\r\n        const sticky_dummy = doc.createElement('DIV');\r\n        sticky_dummy.className = 'se-toolbar-sticky-dummy';\r\n    \r\n        // inner editor div\r\n        const editor_div = doc.createElement('DIV');\r\n        editor_div.className = 'se-wrapper';\r\n\r\n        /** --- init elements and create bottom bar --- */\r\n        const initElements = this._initElements(options, top_div, tool_bar.element, arrow);\r\n\r\n        const bottomBar = initElements.bottomBar;\r\n        const wysiwyg_div = initElements.wysiwygFrame;\r\n        const placeholder_span = initElements.placeholder;\r\n        let textarea = initElements.codeView;\r\n\r\n        // resizing bar\r\n        const resizing_bar = bottomBar.resizingBar;\r\n        const navigation = bottomBar.navigation;\r\n        const char_wrapper = bottomBar.charWrapper;\r\n        const char_counter = bottomBar.charCounter;\r\n    \r\n        // loading box\r\n        const loading_box = doc.createElement('DIV');\r\n        loading_box.className = 'se-loading-box sun-editor-common';\r\n        loading_box.innerHTML = '<div class=\"se-loading-effect\"></div>';\r\n\r\n        // enter line\r\n        const line_breaker = doc.createElement('DIV');\r\n        line_breaker.className = 'se-line-breaker';\r\n        line_breaker.innerHTML = '<button class=\"se-btn\">' + options.icons.line_break + '</button>';\r\n        const line_breaker_t = doc.createElement('DIV');\r\n        line_breaker_t.className += 'se-line-breaker-component';\r\n        const line_breaker_b = line_breaker_t.cloneNode(true);\r\n        line_breaker_t.innerHTML = line_breaker_b.innerHTML = options.icons.line_break;\r\n    \r\n        // resize operation background\r\n        const resize_back = doc.createElement('DIV');\r\n        resize_back.className = 'se-resizing-back';\r\n\r\n        // toolbar container\r\n        const toolbarContainer = options.toolbarContainer;\r\n        if (toolbarContainer) {\r\n            toolbarContainer.appendChild(tool_bar.element);\r\n        }\r\n\r\n        // resizingbar\r\n        const resizingBarContainer = options.resizingBarContainer;\r\n        if (resizing_bar && resizingBarContainer) resizingBarContainer.appendChild(resizing_bar);\r\n    \r\n        /** append html */\r\n        editor_div.appendChild(textarea);\r\n        if (placeholder_span) editor_div.appendChild(placeholder_span);\r\n        if (!toolbarContainer) relative.appendChild(tool_bar.element);\r\n        relative.appendChild(sticky_dummy);\r\n        relative.appendChild(editor_div);\r\n        relative.appendChild(resize_back);\r\n        relative.appendChild(loading_box);\r\n        relative.appendChild(line_breaker);\r\n        relative.appendChild(line_breaker_t);\r\n        relative.appendChild(line_breaker_b);\r\n        if (resizing_bar && !resizingBarContainer) relative.appendChild(resizing_bar);\r\n        top_div.appendChild(relative);\r\n\r\n        textarea = this._checkCodeMirror(options, textarea);\r\n    \r\n        return {\r\n            constructed: {\r\n                _top: top_div,\r\n                _relative: relative,\r\n                _toolBar: tool_bar.element,\r\n                _menuTray: tool_bar._menuTray,\r\n                _editorArea: editor_div,\r\n                _wysiwygArea: wysiwyg_div,\r\n                _codeArea: textarea,\r\n                _placeholder: placeholder_span,\r\n                _resizingBar: resizing_bar,\r\n                _navigation: navigation,\r\n                _charWrapper: char_wrapper,\r\n                _charCounter: char_counter,\r\n                _loading: loading_box,\r\n                _lineBreaker: line_breaker,\r\n                _lineBreaker_t: line_breaker_t,\r\n                _lineBreaker_b: line_breaker_b,\r\n                _resizeBack: resize_back,\r\n                _stickyDummy: sticky_dummy,\r\n                _arrow: arrow\r\n            },\r\n            options: options,\r\n            plugins: tool_bar.plugins,\r\n            pluginCallButtons: tool_bar.pluginCallButtons,\r\n            _responsiveButtons: tool_bar.responsiveButtons\r\n        };\r\n    },\r\n\r\n    /**\r\n     * @description Check the CodeMirror option to apply the CodeMirror and return the CodeMirror element.\r\n     * @param {Object} options options\r\n     * @param {Element} textarea textarea element\r\n     * @private\r\n     */\r\n    _checkCodeMirror: function (options, textarea) {\r\n        if (options.codeMirror) {\r\n            const cmOptions = [{\r\n                mode: 'htmlmixed',\r\n                htmlMode: true,\r\n                lineNumbers: true,\r\n                lineWrapping: true\r\n            }, (options.codeMirror.options || {})].reduce(function (init, option) {\r\n                for (let key in option) {\r\n                    if (util.hasOwn(option, key)) init[key] = option[key];\r\n                }\r\n                return init;\r\n            }, {});\r\n\r\n            if (options.height === 'auto') {\r\n                cmOptions.viewportMargin = Infinity;\r\n                cmOptions.height = 'auto';\r\n            }\r\n            \r\n            const cm = options.codeMirror.src.fromTextArea(textarea, cmOptions);\r\n            cm.display.wrapper.style.cssText = textarea.style.cssText;\r\n            \r\n            options.codeMirrorEditor = cm;\r\n            textarea = cm.display.wrapper;\r\n            textarea.className += ' se-wrapper-code-mirror';\r\n        }\r\n\r\n        return textarea;\r\n    },\r\n\r\n    /**\r\n     * @description Check for a katex object.\r\n     * @param {Object} katex katex object\r\n     * @private\r\n     */\r\n    _checkKatexMath: function (katex) {\r\n        if (!katex) throw Error('[SUNEDITOR.create.fail] To use the math button you need to add a \"katex\" object to the options.');\r\n\r\n        const katexOptions = [{\r\n            throwOnError: false,\r\n        }, (katex.options || {})].reduce(function (init, option) {\r\n            for (let key in option) {\r\n                if (util.hasOwn(option, key)) init[key] = option[key];\r\n            }\r\n            return init;\r\n        }, {});\r\n\r\n        katex.options = katexOptions;\r\n    },\r\n\r\n    /**\r\n     * @description Add or reset options\r\n     * @param {Object} mergeOptions New options property\r\n     * @param {Object} context Context object of core\r\n     * @param {Object} originOptions Origin options\r\n     * @returns {Object} pluginCallButtons\r\n     * @private\r\n     */\r\n    _setOptions: function (mergeOptions, context, originOptions) {\r\n        this._initOptions(context.element.originElement, mergeOptions);\r\n\r\n        const el = context.element;\r\n        const relative = el.relative;\r\n        const editorArea = el.editorArea;\r\n        const isNewToolbarContainer = mergeOptions.toolbarContainer && mergeOptions.toolbarContainer !== originOptions.toolbarContainer;\r\n        const isNewToolbar = mergeOptions.lang !== originOptions.lang || mergeOptions.buttonList !== originOptions.buttonList || mergeOptions.mode !== originOptions.mode || isNewToolbarContainer;\r\n\r\n        const tool_bar = this._createToolBar(document, (isNewToolbar ? mergeOptions.buttonList : originOptions.buttonList), mergeOptions.plugins, mergeOptions);\r\n        if (tool_bar.pluginCallButtons.math) this._checkKatexMath(mergeOptions.katex);\r\n        const arrow = document.createElement('DIV');\r\n        arrow.className = 'se-arrow';\r\n\r\n        if (isNewToolbar) {\r\n            tool_bar.element.style.visibility = 'hidden';\r\n            // toolbar container\r\n            if (isNewToolbarContainer) {\r\n                mergeOptions.toolbarContainer.appendChild(tool_bar.element);\r\n                el.toolbar.parentElement.removeChild(el.toolbar);\r\n            } else {\r\n                el.toolbar.parentElement.replaceChild(tool_bar.element, el.toolbar);\r\n            }\r\n\r\n            el.toolbar = tool_bar.element;\r\n            el._menuTray = tool_bar._menuTray;\r\n            el._arrow = arrow;\r\n        }\r\n        \r\n        const initElements = this._initElements(mergeOptions, el.topArea, (isNewToolbar ? tool_bar.element : el.toolbar), arrow);\r\n\r\n        const bottomBar = initElements.bottomBar;\r\n        const wysiwygFrame = initElements.wysiwygFrame;\r\n        const placeholder_span = initElements.placeholder;\r\n        let code = initElements.codeView;\r\n\r\n        if (el.resizingBar) util.removeItem(el.resizingBar);\r\n        if (bottomBar.resizingBar) {\r\n            if (mergeOptions.resizingBarContainer && mergeOptions.resizingBarContainer !== originOptions.resizingBarContainer) {\r\n                mergeOptions.resizingBarContainer.appendChild(bottomBar.resizingBar);\r\n            } else {\r\n                relative.appendChild(bottomBar.resizingBar);\r\n            }\r\n        }\r\n\r\n        editorArea.innerHTML = '';\r\n        editorArea.appendChild(code);\r\n        if (placeholder_span) editorArea.appendChild(placeholder_span);\r\n\r\n        code = this._checkCodeMirror(mergeOptions, code);\r\n        \r\n        el.resizingBar = bottomBar.resizingBar;\r\n        el.navigation = bottomBar.navigation;\r\n        el.charWrapper = bottomBar.charWrapper;\r\n        el.charCounter = bottomBar.charCounter;\r\n        el.wysiwygFrame = wysiwygFrame;\r\n        el.code = code;\r\n        el.placeholder = placeholder_span;\r\n\r\n        if (mergeOptions.rtl) util.addClass(el.topArea, 'se-rtl');\r\n        else util.removeClass(el.topArea, 'se-rtl');\r\n\r\n        return {\r\n            callButtons: tool_bar.pluginCallButtons,\r\n            plugins: tool_bar.plugins,\r\n            toolbar: tool_bar\r\n        };\r\n    },\r\n\r\n    /**\r\n     * @description Initialize property of suneditor elements\r\n     * @param {Object} options Options\r\n     * @param {Element} topDiv Suneditor top div\r\n     * @param {Element} toolBar Tool bar\r\n     * @param {Element} toolBarArrow Tool bar arrow (balloon editor)\r\n     * @returns {Object} Bottom bar elements (resizingBar, navigation, charWrapper, charCounter)\r\n     * @private\r\n     */\r\n    _initElements: function (options, topDiv, toolBar, toolBarArrow) {\r\n        /** top div */\r\n        topDiv.style.cssText = options._editorStyles.top;\r\n\r\n        /** toolbar */\r\n        if (/inline/i.test(options.mode)) {\r\n            toolBar.className += ' se-toolbar-inline';\r\n            toolBar.style.width = options.toolbarWidth;\r\n        } else if (/balloon/i.test(options.mode)) {\r\n            toolBar.className += ' se-toolbar-balloon';\r\n            toolBar.style.width = options.toolbarWidth;\r\n            toolBar.appendChild(toolBarArrow);\r\n        }\r\n\r\n        /** editor */\r\n        // wysiwyg div or iframe\r\n        const wysiwygDiv = document.createElement(!options.iframe ? 'DIV' : 'IFRAME');\r\n        wysiwygDiv.className = 'se-wrapper-inner se-wrapper-wysiwyg';\r\n        \r\n        if (!options.iframe) {\r\n            wysiwygDiv.setAttribute('contenteditable', true);\r\n            wysiwygDiv.setAttribute('scrolling', 'auto');\r\n            for (let key in options.iframeAttributes) {\r\n                wysiwygDiv.setAttribute(key, options.iframeAttributes[key]);\r\n            }\r\n            wysiwygDiv.className += ' ' + options._editableClass;\r\n            wysiwygDiv.style.cssText = options._editorStyles.frame + options._editorStyles.editor;\r\n        } else {\r\n            wysiwygDiv.allowFullscreen = true;\r\n            wysiwygDiv.frameBorder = 0;\r\n            wysiwygDiv.style.cssText = options._editorStyles.frame;\r\n        }\r\n\r\n        // textarea for code view\r\n        const textarea = document.createElement('TEXTAREA');\r\n        textarea.className = 'se-wrapper-inner se-wrapper-code';\r\n        textarea.style.cssText = options._editorStyles.frame;\r\n        textarea.style.display = 'none';\r\n        if (options.height === 'auto') textarea.style.overflow = 'hidden';\r\n\r\n        /** resize bar */\r\n        let resizingBar = null;\r\n        let navigation = null;\r\n        let charWrapper = null;\r\n        let charCounter = null;\r\n        if (options.resizingBar) {\r\n            resizingBar = document.createElement('DIV');\r\n            resizingBar.className = 'se-resizing-bar sun-editor-common';\r\n\r\n            /** navigation */\r\n            navigation = document.createElement('DIV');\r\n            navigation.className = 'se-navigation sun-editor-common';\r\n            resizingBar.appendChild(navigation);\r\n\r\n            /** char counter */\r\n            if (options.charCounter) {\r\n                charWrapper = document.createElement('DIV');\r\n                charWrapper.className = 'se-char-counter-wrapper';\r\n\r\n                if (options.charCounterLabel) {\r\n                    const charLabel = document.createElement('SPAN');\r\n                    charLabel.className = 'se-char-label';\r\n                    charLabel.textContent = options.charCounterLabel;\r\n                    charWrapper.appendChild(charLabel);\r\n                }\r\n    \r\n                charCounter = document.createElement('SPAN');\r\n                charCounter.className = 'se-char-counter';\r\n                charCounter.textContent = '0';\r\n                charWrapper.appendChild(charCounter);\r\n    \r\n                if (options.maxCharCount > 0) {\r\n                    const char_max = document.createElement('SPAN');\r\n                    char_max.textContent = ' / ' + options.maxCharCount;\r\n                    charWrapper.appendChild(char_max);\r\n                }\r\n\r\n                resizingBar.appendChild(charWrapper);\r\n            }\r\n        }\r\n        \r\n        let placeholder = null;\r\n        if (options.placeholder) {\r\n            placeholder = document.createElement('SPAN');\r\n            placeholder.className = 'se-placeholder';\r\n            placeholder.innerText = options.placeholder;\r\n        }\r\n\r\n        return {\r\n            bottomBar: {\r\n                resizingBar: resizingBar,\r\n                navigation: navigation,\r\n                charWrapper: charWrapper,\r\n                charCounter: charCounter\r\n            },\r\n            wysiwygFrame: wysiwygDiv,\r\n            codeView: textarea,\r\n            placeholder: placeholder\r\n        };\r\n    },\r\n\r\n    /**\r\n     * @description Initialize options\r\n     * @param {Element} element Options object\r\n     * @param {Object} options Options object\r\n     * @private\r\n     */\r\n    _initOptions: function (element, options) {\r\n        /** Values */\r\n        options.lang = options.lang || _defaultLang;\r\n        options.defaultTag = typeof options.defaultTag === 'string' && options.defaultTag.length > 0 ? options.defaultTag : 'p';\r\n        const textTags = options.textTags = [{bold: 'STRONG', underline: 'U', italic: 'EM', strike: 'DEL', sub: 'SUB', sup: 'SUP'}, (options.textTags || {})].reduce(function (_default, _new) {\r\n            for (let key in _new) {\r\n                _default[key] = _new[key];\r\n            }\r\n            return _default;\r\n        }, {});\r\n        options._textTagsMap = {\r\n            'strong': textTags.bold.toLowerCase(),\r\n            'b': textTags.bold.toLowerCase(),\r\n            'u': textTags.underline.toLowerCase(),\r\n            'ins': textTags.underline.toLowerCase(),\r\n            'em': textTags.italic.toLowerCase(),\r\n            'i': textTags.italic.toLowerCase(),\r\n            'del': textTags.strike.toLowerCase(),\r\n            'strike': textTags.strike.toLowerCase(),\r\n            's': textTags.strike.toLowerCase(),\r\n            'sub': textTags.sub.toLowerCase(),\r\n            'sup': textTags.sup.toLowerCase()\r\n        };\r\n        options.value = typeof options.value === 'string' ? options.value : null;\r\n        options.historyStackDelayTime = typeof options.historyStackDelayTime === 'number' ? options.historyStackDelayTime : 400;\r\n        /** Whitelist, Blacklist */\r\n        const whitelist = 'br|p|div|pre|blockquote|h1|h2|h3|h4|h5|h6|ol|ul|li|hr|figure|figcaption|img|iframe|audio|video|source|table|thead|tbody|tr|th|td|a|b|strong|var|i|em|u|ins|s|span|strike|del|sub|sup|code|svg|path|details|summary';\r\n        // tags\r\n        options.tagsBlacklist = options.tagsBlacklist || '';\r\n        options._defaultTagsWhitelist = typeof options._defaultTagsWhitelist === 'string' ? options._defaultTagsWhitelist : whitelist;\r\n        options._editorTagsWhitelist = options.addTagsWhitelist === '*' ? '*' : this._setWhitelist(options._defaultTagsWhitelist + (typeof options.addTagsWhitelist === 'string' && options.addTagsWhitelist.length > 0 ? '|' + options.addTagsWhitelist : ''), options.tagsBlacklist);\r\n        // paste tags\r\n        options.pasteTagsBlacklist = options.tagsBlacklist + (options.tagsBlacklist && options.pasteTagsBlacklist ? ('|' + options.pasteTagsBlacklist) : (options.pasteTagsBlacklist || ''));\r\n        options.pasteTagsWhitelist = options.pasteTagsWhitelist === '*' ? '*' : this._setWhitelist(typeof options.pasteTagsWhitelist === 'string' ? options.pasteTagsWhitelist : options._editorTagsWhitelist, options.pasteTagsBlacklist);\r\n        // tag attributes\r\n        options.attributesWhitelist = (!options.attributesWhitelist || typeof options.attributesWhitelist !== 'object') ? null : options.attributesWhitelist;\r\n        options.attributesBlacklist = (!options.attributesBlacklist || typeof options.attributesBlacklist !== 'object') ? null : options.attributesBlacklist;\r\n        /** Layout */\r\n        options.mode = options.mode || 'classic'; // classic, inline, balloon, balloon-always\r\n        options.rtl = !!options.rtl;\r\n        options.lineAttrReset = typeof options.lineAttrReset === 'string' && options.lineAttrReset ? options.lineAttrReset === '*' ? '*' : new RegExp('^(' + options.lineAttrReset + ')$', 'i') : null;\r\n        options._editableClass = 'sun-editor-editable' + (options.rtl ? ' se-rtl' : '');\r\n        options._printClass = typeof options._printClass === 'string' ? options._printClass : null;\r\n        options.toolbarWidth = options.toolbarWidth ? (util.isNumber(options.toolbarWidth) ? options.toolbarWidth + 'px' : options.toolbarWidth) : 'auto';\r\n        options.toolbarContainer = typeof options.toolbarContainer === 'string' ? document.querySelector(options.toolbarContainer) : options.toolbarContainer;\r\n        options.stickyToolbar = (/balloon/i.test(options.mode) || !!options.toolbarContainer) ? -1 : options.stickyToolbar === undefined ? 0 : (/^\\d+/.test(options.stickyToolbar) ? util.getNumber(options.stickyToolbar, 0) : -1);\r\n        options.fullScreenOffset = options.fullScreenOffset === undefined ? 0 : (/^\\d+/.test(options.fullScreenOffset) ? util.getNumber(options.fullScreenOffset, 0) : 0);\r\n        options.fullPage = !!options.fullPage;\r\n        options.iframe = options.fullPage || !!options.iframe;\r\n        options.iframeAttributes = options.iframeAttributes || {};\r\n        options.iframeCSSFileName = options.iframe ? typeof options.iframeCSSFileName === 'string' ? [options.iframeCSSFileName] : (options.iframeCSSFileName || ['suneditor']) : null;\r\n        options.previewTemplate = typeof options.previewTemplate === 'string' ? options.previewTemplate : null;\r\n        options.printTemplate = typeof options.printTemplate === 'string' ? options.printTemplate : null;\r\n        /** CodeMirror object */\r\n        options.codeMirror = options.codeMirror ? options.codeMirror.src ? options.codeMirror : {src: options.codeMirror} : null;\r\n        /** katex object (Math plugin) */\r\n        options.katex = options.katex ? options.katex.src ? options.katex : {src: options.katex} : null;\r\n        options.mathFontSize = !!options.mathFontSize ? options.mathFontSize : [\r\n            {text: '1', value: '1em'},\r\n            {text: '1.5', value: '1.5em'},\r\n            {text: '2', value: '2em'},\r\n            {text: '2.5', value: '2.5em'}\r\n        ];\r\n        /** Display */\r\n        options.position = typeof options.position === 'string' ? options.position : null;\r\n        options.display = options.display || (element.style.display === 'none' || !element.style.display ? 'block' : element.style.display);\r\n        options.popupDisplay = options.popupDisplay || 'full';\r\n        /** Bottom resizing bar */\r\n        options.resizingBar = options.resizingBar === undefined ? (/inline|balloon/i.test(options.mode) ? false : true) : options.resizingBar;\r\n        options.showPathLabel = !options.resizingBar ? false : typeof options.showPathLabel === 'boolean' ? options.showPathLabel : true;\r\n        options.resizeEnable = options.resizeEnable === undefined ? true : !!options.resizeEnable;\r\n        options.resizingBarContainer = typeof options.resizingBarContainer === 'string' ? document.querySelector(options.resizingBarContainer) : options.resizingBarContainer;\r\n        /** Character count */\r\n        options.charCounter = options.maxCharCount > 0 ? true : typeof options.charCounter === 'boolean' ? options.charCounter : false;\r\n        options.charCounterType = typeof options.charCounterType === 'string' ? options.charCounterType : 'char';\r\n        options.charCounterLabel = typeof options.charCounterLabel === 'string' ? options.charCounterLabel.trim() : null;\r\n        options.maxCharCount = util.isNumber(options.maxCharCount) && options.maxCharCount > -1 ? options.maxCharCount * 1 : null;\r\n        /** Width size */\r\n        options.width = options.width ? (util.isNumber(options.width) ? options.width + 'px' : options.width) : (element.clientWidth ? element.clientWidth + 'px' : '100%');\r\n        options.minWidth = (util.isNumber(options.minWidth) ? options.minWidth + 'px' : options.minWidth) || '';\r\n        options.maxWidth = (util.isNumber(options.maxWidth) ? options.maxWidth + 'px' : options.maxWidth) || '';\r\n        /** Height size */\r\n        options.height = options.height ? (util.isNumber(options.height) ? options.height + 'px' : options.height) : (element.clientHeight ? element.clientHeight + 'px' : 'auto');\r\n        options.minHeight = (util.isNumber(options.minHeight) ? options.minHeight + 'px' : options.minHeight) || '';\r\n        options.maxHeight = (util.isNumber(options.maxHeight) ? options.maxHeight + 'px' : options.maxHeight) || '';\r\n        /** Editing area default style */\r\n        options.defaultStyle = typeof options.defaultStyle === 'string' ? options.defaultStyle : '';\r\n        /** Defining menu items */\r\n        options.font = !options.font ? null : options.font;\r\n        options.fontSize = !options.fontSize ? null : options.fontSize;\r\n        options.formats = !options.formats ? null : options.formats;\r\n        options.colorList = !options.colorList ? null : options.colorList;\r\n        options.lineHeights = !options.lineHeights ? null : options.lineHeights;\r\n        options.paragraphStyles = !options.paragraphStyles ? null : options.paragraphStyles;\r\n        options.textStyles = !options.textStyles ? null : options.textStyles;\r\n        options.fontSizeUnit = typeof options.fontSizeUnit === 'string' ? (options.fontSizeUnit.trim() || 'px') : 'px';\r\n        options.alignItems = typeof options.alignItems === 'object' ? options.alignItems : (options.rtl ? ['right', 'center', 'left', 'justify'] : ['left', 'center', 'right', 'justify']);\r\n        /** Image */\r\n        options.imageResizing = options.imageResizing === undefined ? true : options.imageResizing;\r\n        options.imageHeightShow = options.imageHeightShow === undefined ? true : !!options.imageHeightShow;\r\n        options.imageAlignShow = options.imageAlignShow === undefined ? true : !!options.imageAlignShow;\r\n        options.imageWidth = !options.imageWidth ? 'auto' : util.isNumber(options.imageWidth) ? options.imageWidth + 'px' : options.imageWidth;\r\n        options.imageHeight = !options.imageHeight ? 'auto' : util.isNumber(options.imageHeight) ? options.imageHeight + 'px' : options.imageHeight;\r\n        options.imageSizeOnlyPercentage = !!options.imageSizeOnlyPercentage;\r\n        options._imageSizeUnit = options.imageSizeOnlyPercentage ? '%' : 'px';\r\n        options.imageRotation = options.imageRotation !== undefined ? options.imageRotation : !(options.imageSizeOnlyPercentage || !options.imageHeightShow);\r\n        options.imageFileInput = options.imageFileInput === undefined ? true : options.imageFileInput;\r\n        options.imageUrlInput = (options.imageUrlInput === undefined || !options.imageFileInput) ? true : options.imageUrlInput;\r\n        options.imageUploadHeader = options.imageUploadHeader || null;\r\n        options.imageUploadUrl = typeof options.imageUploadUrl === 'string' ? options.imageUploadUrl : null;\r\n        options.imageUploadSizeLimit = /\\d+/.test(options.imageUploadSizeLimit) ? util.getNumber(options.imageUploadSizeLimit, 0) : null;\r\n        options.imageMultipleFile = !!options.imageMultipleFile;\r\n        options.imageAccept = (typeof options.imageAccept !== 'string' || options.imageAccept.trim() === \"*\") ? 'image/*' : options.imageAccept.trim() || 'image/*';\r\n        /** Image - image gallery */\r\n        options.imageGalleryUrl = typeof options.imageGalleryUrl === 'string' ? options.imageGalleryUrl : null;\r\n        options.imageGalleryHeader = options.imageGalleryHeader || null;\r\n        /** Video */\r\n        options.videoResizing = options.videoResizing === undefined ? true : options.videoResizing;\r\n        options.videoHeightShow = options.videoHeightShow === undefined ? true : !!options.videoHeightShow;\r\n        options.videoAlignShow = options.videoAlignShow === undefined ? true : !!options.videoAlignShow;\r\n        options.videoRatioShow = options.videoRatioShow === undefined ? true : !!options.videoRatioShow;\r\n        options.videoWidth = !options.videoWidth || !util.getNumber(options.videoWidth, 0) ? '' : util.isNumber(options.videoWidth) ? options.videoWidth + 'px' : options.videoWidth;\r\n        options.videoHeight = !options.videoHeight || !util.getNumber(options.videoHeight, 0) ? '' : util.isNumber(options.videoHeight) ? options.videoHeight + 'px' : options.videoHeight;\r\n        options.videoSizeOnlyPercentage = !!options.videoSizeOnlyPercentage;\r\n        options._videoSizeUnit = options.videoSizeOnlyPercentage ? '%' : 'px';\r\n        options.videoRotation = options.videoRotation !== undefined ? options.videoRotation : !(options.videoSizeOnlyPercentage || !options.videoHeightShow);\r\n        options.videoRatio = (util.getNumber(options.videoRatio, 4) || 0.5625);\r\n        options.videoRatioList = !options.videoRatioList ? null : options.videoRatioList;\r\n        options.youtubeQuery = (options.youtubeQuery || '').replace('?', '');\r\n        options.videoFileInput = !!options.videoFileInput;\r\n        options.videoUrlInput = (options.videoUrlInput === undefined || !options.videoFileInput) ? true : options.videoUrlInput;\r\n        options.videoUploadHeader = options.videoUploadHeader || null;\r\n        options.videoUploadUrl = typeof options.videoUploadUrl === 'string' ? options.videoUploadUrl : null;\r\n        options.videoUploadSizeLimit = /\\d+/.test(options.videoUploadSizeLimit) ? util.getNumber(options.videoUploadSizeLimit, 0) : null;\r\n        options.videoMultipleFile = !!options.videoMultipleFile;\r\n        options.videoTagAttrs = options.videoTagAttrs || null;\r\n        options.videoIframeAttrs = options.videoIframeAttrs || null;\r\n        options.videoAccept = (typeof options.videoAccept !== 'string' || options.videoAccept.trim() === \"*\") ? 'video/*' : options.videoAccept.trim() || 'video/*';\r\n        /** Audio */\r\n        options.audioWidth = !options.audioWidth ? '' : util.isNumber(options.audioWidth) ? options.audioWidth + 'px' : options.audioWidth;\r\n        options.audioHeight = !options.audioHeight ? '' : util.isNumber(options.audioHeight) ? options.audioHeight + 'px' : options.audioHeight;\r\n        options.audioFileInput = !!options.audioFileInput;\r\n        options.audioUrlInput = (options.audioUrlInput === undefined || !options.audioFileInput) ? true : options.audioUrlInput;\r\n        options.audioUploadHeader = options.audioUploadHeader || null;\r\n        options.audioUploadUrl = typeof options.audioUploadUrl === 'string' ? options.audioUploadUrl : null;\r\n        options.audioUploadSizeLimit = /\\d+/.test(options.audioUploadSizeLimit) ? util.getNumber(options.audioUploadSizeLimit, 0) : null;\r\n        options.audioMultipleFile = !!options.audioMultipleFile;\r\n        options.audioTagAttrs = options.audioTagAttrs || null;\r\n        options.audioAccept = (typeof options.audioAccept !== 'string' || options.audioAccept.trim() === \"*\") ? 'audio/*' : options.audioAccept.trim() || 'audio/*';\r\n        /** Table */\r\n        options.tableCellControllerPosition = typeof options.tableCellControllerPosition === 'string' ? options.tableCellControllerPosition.toLowerCase() : 'cell';\r\n        /** Link */\r\n        options.linkTargetNewWindow = !!options.linkTargetNewWindow;\r\n        options.linkProtocol = typeof options.linkProtocol === 'string' ? options.linkProtocol : null;\r\n        options.linkRel = Array.isArray(options.linkRel) ? options.linkRel : [];\r\n        options.linkRelDefault = options.linkRelDefault || {};\r\n        /** HR */\r\n        // options.hrItems = options.hrItems;\r\n        /** Key actions */\r\n        options.tabDisable = !!options.tabDisable;\r\n        options.shortcutsDisable = Array.isArray(options.shortcutsDisable) ? options.shortcutsDisable : [];\r\n        options.shortcutsHint = options.shortcutsHint === undefined ? true : !!options.shortcutsHint;\r\n        /** Defining save button */\r\n        options.callBackSave = !options.callBackSave ? null : options.callBackSave;\r\n        /** Templates Array */\r\n        options.templates = !options.templates ? null : options.templates;\r\n        /** ETC */\r\n        options.placeholder = typeof options.placeholder === 'string' ? options.placeholder : null;\r\n        options.mediaAutoSelect = options.mediaAutoSelect === undefined ? true : !!options.mediaAutoSelect;\r\n        /** Buttons */\r\n        options.buttonList = !!options.buttonList ? options.buttonList : [\r\n            ['undo', 'redo'],\r\n            ['bold', 'underline', 'italic', 'strike', 'subscript', 'superscript'],\r\n            ['removeFormat'],\r\n            ['outdent', 'indent'],\r\n            ['fullScreen', 'showBlocks', 'codeView'],\r\n            ['preview', 'print']\r\n        ];\r\n\r\n        /** RTL - buttons */\r\n        if (options.rtl) {\r\n            options.buttonList = options.buttonList.reverse();\r\n        }\r\n\r\n        /** --- Define icons --- */\r\n        // custom icons\r\n        options.icons = (!options.icons || typeof options.icons !== 'object') ? _icons : [_icons, options.icons].reduce(function (_default, _new) {\r\n            for (let key in _new) {\r\n                if (util.hasOwn(_new, key)) _default[key] = _new[key];\r\n            }\r\n            return _default;\r\n        }, {});\r\n        // rtl icons\r\n        options.icons = !options.rtl ? options.icons : [options.icons, options.icons.rtl].reduce(function (_default, _new) {\r\n            for (let key in _new) {\r\n                if (util.hasOwn(_new, key)) _default[key] = _new[key];\r\n            }\r\n            return _default;\r\n        }, {});\r\n\r\n        /** _init options */\r\n        options._editorStyles = util._setDefaultOptionStyle(options, options.defaultStyle);\r\n    },\r\n\r\n    _setWhitelist: function (whitelist, blacklist) {\r\n        if (typeof blacklist !== 'string') return whitelist;\r\n        blacklist = blacklist.split('|');\r\n        whitelist = whitelist.split('|');\r\n        for (let i = 0, len = blacklist.length, index; i < len; i++) {\r\n            index = whitelist.indexOf(blacklist[i]);\r\n            if (index > -1) whitelist.splice(index, 1);\r\n        }\r\n        return whitelist.join('|');\r\n    },\r\n\r\n    /**\r\n     * @description Suneditor's Default button list\r\n     * @param {Object} options options\r\n     * @private\r\n     */\r\n    _defaultButtons: function (options) {\r\n        const icons = options.icons;\r\n        const lang = options.lang;\r\n        const cmd = util.isOSX_IOS ? '⌘' : 'CTRL';\r\n        const addShift = util.isOSX_IOS ? '⇧' : '+SHIFT';\r\n        const shortcutsDisable = !options.shortcutsHint ? ['bold', 'strike', 'underline', 'italic', 'undo', 'indent', 'save'] : options.shortcutsDisable;\r\n        const indentKey = options.rtl ? ['[',']'] : [']','['];\r\n\r\n        return {\r\n            /** default command */\r\n            bold: ['_se_command_bold', lang.toolbar.bold + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('bold') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">B</span>') + '</span>', 'bold', '', icons.bold],\r\n            underline: ['_se_command_underline', lang.toolbar.underline + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('underline') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">U</span>') + '</span>', 'underline', '', icons.underline],\r\n            italic: ['_se_command_italic', lang.toolbar.italic + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('italic') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">I</span>') + '</span>', 'italic', '', icons.italic],\r\n            strike: ['_se_command_strike', lang.toolbar.strike + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('strike') > -1 ? '' : cmd + addShift + '+<span class=\"se-shortcut-key\">S</span>') + '</span>', 'strike', '', icons.strike],\r\n            subscript: ['_se_command_subscript', lang.toolbar.subscript, 'SUB', '', icons.subscript],\r\n            superscript: ['_se_command_superscript', lang.toolbar.superscript, 'SUP', '', icons.superscript],\r\n            removeFormat: ['', lang.toolbar.removeFormat, 'removeFormat', '', icons.erase],\r\n            indent: ['_se_command_indent', lang.toolbar.indent + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('indent') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">' + indentKey[0] + '</span>') + '</span>', 'indent', '', icons.outdent],\r\n            outdent: ['_se_command_outdent', lang.toolbar.outdent + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('indent') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">' + indentKey[1] + '</span>') + '</span>', 'outdent', '', icons.indent],\r\n            fullScreen: ['se-code-view-enabled se-resizing-enabled _se_command_fullScreen', lang.toolbar.fullScreen, 'fullScreen', '', icons.expansion],\r\n            showBlocks: ['_se_command_showBlocks', lang.toolbar.showBlocks, 'showBlocks', '', icons.show_blocks],\r\n            codeView: ['se-code-view-enabled se-resizing-enabled _se_command_codeView', lang.toolbar.codeView, 'codeView', '', icons.code_view],\r\n            undo: ['_se_command_undo', lang.toolbar.undo + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('undo') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">Z</span>') + '</span>', 'undo', '', icons.undo],\r\n            redo: ['_se_command_redo', lang.toolbar.redo + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('undo') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">Y</span> / ' + cmd + addShift + '+<span class=\"se-shortcut-key\">Z</span>') + '</span>', 'redo', '', icons.redo],\r\n            preview: ['se-resizing-enabled', lang.toolbar.preview, 'preview', '', icons.preview],\r\n            print: ['se-resizing-enabled', lang.toolbar.print, 'print', '', icons.print],\r\n            dir: ['_se_command_dir', lang.toolbar[options.rtl ? 'dir_ltr' : 'dir_rtl'], 'dir', '',  icons[options.rtl ? 'dir_ltr' : 'dir_rtl']],\r\n            dir_ltr: ['_se_command_dir_ltr', lang.toolbar.dir_ltr, 'dir_ltr', '',  icons.dir_ltr],\r\n            dir_rtl: ['_se_command_dir_rtl', lang.toolbar.dir_rtl, 'dir_rtl', '',  icons.dir_rtl],\r\n            save: ['_se_command_save se-resizing-enabled', lang.toolbar.save + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('save') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">S</span>') + '</span>', 'save', '', icons.save],\r\n            /** plugins - command */\r\n            blockquote: ['', lang.toolbar.tag_blockquote, 'blockquote', 'command', icons.blockquote],\r\n            /** plugins - submenu */\r\n            font: ['se-btn-select se-btn-tool-font', lang.toolbar.font, 'font', 'submenu', '<span class=\"txt\">' + lang.toolbar.font + '</span>' + icons.arrow_down],\r\n            formatBlock: ['se-btn-select se-btn-tool-format', lang.toolbar.formats, 'formatBlock', 'submenu', '<span class=\"txt\">' + lang.toolbar.formats + '</span>' + icons.arrow_down],\r\n            fontSize: ['se-btn-select se-btn-tool-size', lang.toolbar.fontSize, 'fontSize', 'submenu', '<span class=\"txt\">' + lang.toolbar.fontSize + '</span>' + icons.arrow_down],\r\n            fontColor: ['', lang.toolbar.fontColor, 'fontColor', 'submenu', icons.font_color],\r\n            hiliteColor: ['', lang.toolbar.hiliteColor, 'hiliteColor', 'submenu', icons.highlight_color],\r\n            align: ['se-btn-align', lang.toolbar.align, 'align', 'submenu', (options.rtl ? icons.align_right : icons.align_left)],\r\n            list: ['', lang.toolbar.list, 'list', 'submenu', icons.list_number],\r\n            horizontalRule: ['btn_line', lang.toolbar.horizontalRule, 'horizontalRule', 'submenu', icons.horizontal_rule],\r\n            table: ['', lang.toolbar.table, 'table', 'submenu', icons.table],\r\n            lineHeight: ['', lang.toolbar.lineHeight, 'lineHeight', 'submenu', icons.line_height],\r\n            template: ['', lang.toolbar.template, 'template', 'submenu', icons.template],\r\n            paragraphStyle: ['', lang.toolbar.paragraphStyle, 'paragraphStyle', 'submenu', icons.paragraph_style],\r\n            textStyle: ['', lang.toolbar.textStyle, 'textStyle', 'submenu', icons.text_style],\r\n            /** plugins - dialog */\r\n            link: ['', lang.toolbar.link, 'link', 'dialog', icons.link],\r\n            image: ['', lang.toolbar.image, 'image', 'dialog', icons.image],\r\n            video: ['', lang.toolbar.video, 'video', 'dialog', icons.video],\r\n            audio: ['', lang.toolbar.audio, 'audio', 'dialog', icons.audio],\r\n            math: ['', lang.toolbar.math, 'math', 'dialog', icons.math],\r\n            /** plugins - fileBrowser */\r\n            imageGallery: ['', lang.toolbar.imageGallery, 'imageGallery', 'fileBrowser', icons.image_gallery]\r\n        };\r\n    },\r\n\r\n    /**\r\n     * @description Create a group div containing each module\r\n     * @returns {Object}\r\n     * @private\r\n     */\r\n    _createModuleGroup: function () {\r\n        const oDiv = util.createElement('DIV');\r\n        oDiv.className = 'se-btn-module se-btn-module-border';\r\n\r\n        const oUl = util.createElement('UL');\r\n        oUl.className = 'se-menu-list';\r\n        oDiv.appendChild(oUl);\r\n\r\n        return {\r\n            'div': oDiv,\r\n            'ul': oUl\r\n        };\r\n    },\r\n\r\n    /**\r\n     * @description Create a button element\r\n     * @param {string} buttonClass className in button\r\n     * @param {string} title Title in button\r\n     * @param {string} dataCommand The data-command property of the button\r\n     * @param {string} dataDisplay The data-display property of the button ('dialog', 'submenu', 'command')\r\n     * @param {string} innerHTML Html in button\r\n     * @param {string} _disabled Button disabled\r\n     * @param {Object} _icons Icons\r\n     * @returns {Object}\r\n     * @private\r\n     */\r\n    _createButton: function (buttonClass, title, dataCommand, dataDisplay, innerHTML, _disabled, _icons) {\r\n        const oLi = util.createElement('LI');\r\n        const oButton = util.createElement('BUTTON');\r\n\r\n        oButton.setAttribute('type', 'button');\r\n        oButton.setAttribute('class', 'se-btn' + (buttonClass ? ' ' + buttonClass : '') + ' se-tooltip');\r\n        oButton.setAttribute('data-command', dataCommand);\r\n        oButton.setAttribute('data-display', dataDisplay);\r\n        oButton.setAttribute('tabindex', '-1');\r\n        \r\n        if (!innerHTML) innerHTML = '<span class=\"se-icon-text\">!</span>';\r\n        if (/^default\\./i.test(innerHTML)) {\r\n            innerHTML = _icons[innerHTML.replace(/^default\\./i, '')];\r\n        }\r\n        if (/^text\\./i.test(innerHTML)) {\r\n            innerHTML = innerHTML.replace(/^text\\./i, '');\r\n            oButton.className += ' se-btn-more-text';\r\n        }\r\n\r\n        innerHTML += '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + (title || dataCommand) + '</span></span>';\r\n\r\n        if (_disabled) oButton.setAttribute('disabled', true);\r\n        \r\n        oButton.innerHTML = innerHTML;\r\n        oLi.appendChild(oButton);\r\n\r\n        return {\r\n            'li': oLi,\r\n            'button': oButton\r\n        };\r\n    },\r\n\r\n    /**\r\n     * @description Create editor HTML\r\n     * @param {Array} doc document object\r\n     * @param {Array} buttonList option.buttonList\r\n     * @param {Array|Object|null} _plugins Plugins\r\n     * @param {Array} options options\r\n     * @returns {Object} { element: (Element) Toolbar element, plugins: (Array|null) Plugins Array, pluginCallButtons: (Object), responsiveButtons: (Array) }\r\n     * @private\r\n     */\r\n    _createToolBar: function (doc, buttonList, _plugins, options) {\r\n        const separator_vertical = doc.createElement('DIV');\r\n        separator_vertical.className = 'se-toolbar-separator-vertical';\r\n\r\n        const tool_bar = doc.createElement('DIV');\r\n        tool_bar.className = 'se-toolbar sun-editor-common';\r\n\r\n        const _buttonTray = doc.createElement('DIV');\r\n        _buttonTray.className = 'se-btn-tray';\r\n        tool_bar.appendChild(_buttonTray);\r\n\r\n        /** create button list */\r\n        buttonList = JSON.parse(JSON.stringify(buttonList));\r\n        const icons = options.icons;\r\n        const defaultButtonList = this._defaultButtons(options);\r\n        const pluginCallButtons = {};\r\n        const responsiveButtons = [];\r\n        const plugins = {};\r\n        if (_plugins) {\r\n            const pluginsValues = _plugins.length ? _plugins : Object.keys(_plugins).map(function(name) { return _plugins[name]; });\r\n            for (let i = 0, len = pluginsValues.length, p; i < len; i++) {\r\n                p = pluginsValues[i].default || pluginsValues[i];\r\n                plugins[p.name] = p;\r\n            }\r\n        }\r\n\r\n        let module = null;\r\n        let button = null;\r\n        let moduleElement = null;\r\n        let buttonElement = null;\r\n        let pluginName = '';\r\n        let vertical = false;\r\n        const moreLayer = util.createElement('DIV');\r\n        moreLayer.className = 'se-toolbar-more-layer';\r\n\r\n        buttonGroupLoop:\r\n        for (let i = 0, more, moreContainer, moreCommand, buttonGroup, align; i < buttonList.length; i++) {\r\n            more = false;\r\n            align = '';\r\n            buttonGroup = buttonList[i];\r\n            moduleElement = this._createModuleGroup();\r\n\r\n            // button object\r\n            if (typeof buttonGroup === 'object') {\r\n                // buttons loop\r\n                for (let j = 0, moreButton; j < buttonGroup.length; j++) {\r\n                    button = buttonGroup[j];\r\n                    moreButton = false;\r\n\r\n                    if (/^\\%\\d+/.test(button) && j === 0) {\r\n                        buttonGroup[0] = button.replace(/[^\\d]/g, '');\r\n                        responsiveButtons.push(buttonGroup);\r\n                        buttonList.splice(i--, 1);\r\n                        continue buttonGroupLoop;\r\n                    }\r\n                    \r\n                    if (typeof button === 'object') {\r\n                        if (typeof button.add === 'function') {\r\n                            pluginName = button.name;\r\n                            module = defaultButtonList[pluginName];\r\n                            plugins[pluginName] = button;\r\n                        } else {\r\n                            pluginName = button.name;\r\n                            module = [button.buttonClass, button.title, button.name, button.dataDisplay, button.innerHTML, button._disabled];\r\n                        }\r\n                    } else {\r\n                        // align\r\n                        if (/^\\-/.test(button)) {\r\n                            align = button.substr(1);\r\n                            moduleElement.div.className += ' module-float-' + align;\r\n                            continue;\r\n                        }\r\n\r\n                        // rtl fix\r\n                        if (/^\\#/.test(button)) {\r\n                            const option = button.substr(1);\r\n                            if (option === 'fix') moduleElement.ul.className += ' se-menu-dir-fix';\r\n                            continue;\r\n                        }\r\n                        \r\n                        // more button\r\n                        if (/^\\:/.test(button)) {\r\n                            moreButton = true;\r\n                            const matched = button.match(/^\\:([^\\-]+)\\-([^\\-]+)\\-([^\\-]+)/);\r\n                            moreCommand = '__se__' + matched[1].trim();\r\n                            const title = matched[2].trim();\r\n                            const innerHTML = matched[3].trim();\r\n                            module = ['se-btn-more', title, moreCommand, 'MORE', innerHTML];\r\n                        }\r\n                        // buttons\r\n                        else {\r\n                            module = defaultButtonList[button];\r\n                        }\r\n\r\n                        pluginName = button;\r\n                        if (!module) {\r\n                            const custom = plugins[pluginName];\r\n                            if (!custom) throw Error('[SUNEDITOR.create.toolbar.fail] The button name of a plugin that does not exist. [' + pluginName + ']');\r\n                            module = [custom.buttonClass, custom.title, custom.name, custom.display, custom.innerHTML, custom._disabled];\r\n                        }\r\n                    }\r\n\r\n                    buttonElement = this._createButton(module[0], module[1], module[2], module[3], module[4], module[5], icons);\r\n                    (more ? moreContainer : moduleElement.ul).appendChild(buttonElement.li);\r\n\r\n                    if (plugins[pluginName]) {\r\n                        pluginCallButtons[pluginName] = buttonElement.button;\r\n                    }\r\n\r\n                    // more button\r\n                    if (moreButton) {\r\n                        more = true;\r\n                        moreContainer = util.createElement('DIV');\r\n                        moreContainer.className = 'se-more-layer ' + moreCommand;\r\n                        moreContainer.innerHTML = '<div class=\"se-more-form\"><ul class=\"se-menu-list\"' + (align ? ' style=\"float: ' + align + ';\"' : '') + '></ul></div>';\r\n                        moreLayer.appendChild(moreContainer);\r\n                        moreContainer = moreContainer.firstElementChild.firstElementChild;\r\n                    }\r\n                }\r\n\r\n                if (vertical) {\r\n                    const sv =  separator_vertical.cloneNode(false);\r\n                    _buttonTray.appendChild(sv);\r\n                }\r\n                \r\n                _buttonTray.appendChild(moduleElement.div);\r\n                vertical = true;\r\n            }\r\n            /** line break  */\r\n            else if (/^\\/$/.test(buttonGroup)) {\r\n                const enterDiv = doc.createElement('DIV');\r\n                enterDiv.className = 'se-btn-module-enter';\r\n                _buttonTray.appendChild(enterDiv);\r\n                vertical = false;\r\n            }\r\n        }\r\n\r\n        switch (_buttonTray.children.length) {\r\n            case 0:\r\n                _buttonTray.style.display = 'none';\r\n                break;\r\n            case 1:\r\n                util.removeClass(_buttonTray.firstElementChild, 'se-btn-module-border');\r\n                break;\r\n            default:\r\n                if (options.rtl) {\r\n                    const sv =  separator_vertical.cloneNode(false);\r\n                    sv.style.float = _buttonTray.lastElementChild.style.float;\r\n                    _buttonTray.appendChild(sv);\r\n                }\r\n        }\r\n\r\n        if (responsiveButtons.length > 0) responsiveButtons.unshift(buttonList);\r\n        if (moreLayer.children.length > 0) _buttonTray.appendChild(moreLayer);\r\n\r\n        // menu tray\r\n        const _menuTray = doc.createElement('DIV');\r\n        _menuTray.className = 'se-menu-tray';\r\n        tool_bar.appendChild(_menuTray);\r\n\r\n        // cover\r\n        const tool_cover = doc.createElement('DIV');\r\n        tool_cover.className = 'se-toolbar-cover';\r\n        tool_bar.appendChild(tool_cover);\r\n\r\n        return {\r\n            'element': tool_bar,\r\n            'plugins': plugins,\r\n            'pluginCallButtons': pluginCallButtons,\r\n            'responsiveButtons': responsiveButtons,\r\n            '_menuTray': _menuTray,\r\n            '_buttonTray': _buttonTray\r\n        };\r\n    }\r\n};"]},"metadata":{},"sourceType":"module"}